<?php
 namespace Optimization\Cache; use Boilerplate\Util\ArrayUtil; use Boilerplate\Util\StringUtil; use Boilerplate\Notice; use Optimization\Util\FormatUtil; class Cache extends Common { public function __construct() { goto YXeRN; ELNYY: $this->loadRequirement(); goto P1vie; kX1L5: parent::__construct(); goto ELNYY; YXeRN: if (!$this->loadConstant()) { goto PEv3y; } goto kX1L5; P1vie: PEv3y: goto DD7w3; DD7w3: } public function addFilters() : self { $this->addFilter("\157\x70\x74\x69\x6d\151\x7a\141\164\151\157\156\137\x63\x72\x6f\156\x5f\x65\166\x65\156\164\x73", [$this, "\141\144\x64\124\x6f\x43\162\x6f\156\105\166\x65\x6e\x74"])->addFilter("\x63\x6f\x6d\155\145\x6e\x74\x5f\x63\157\157\x6b\x69\145\137\154\151\146\x65\x74\151\x6d\x65", [$this, "\x63\157\155\x6d\145\156\164\103\x6f\157\153\x69\145\x4c\151\x66\145\164\x69\x6d\x65"])->addFilter("\160\162\145\x6c\157\x61\x64\x5f\162\x65\152\145\x63\164\137\x75\x72\151", [$this, "\x61\144\x64\122\x65\x6a\x65\x63\x74\x55\162\x69"], 2)->addFilter("\x66\x69\154\x65\163\171\163\x74\x65\x6d\137\x72\x65\161\165\151\x72\145\137\144\x69\x72\x65\x63\164\x6f\x72\x69\x65\x73", [$this, "\x61\x64\x64\x54\x6f\x52\145\161\165\x69\x72\145\104\151\162\145\143\164\x6f\162\x79"])->addFilter("\x66\x69\154\145\163\x79\163\x74\x65\x6d\x5f\x72\x65\x71\x75\x69\162\145\x5f\144\x69\x72\145\143\x74\x6f\162\x69\x65\x73", [$this, "\141\144\x64\x54\x6f\122\145\x71\x75\151\162\145\x44\151\x72\145\x63\x74\157\162\171"])->addFilter("\157\x70\x74\x69\155\151\x7a\141\x74\151\x6f\156\x5f\143\141\x6e\137\160\162\145\x6c\x6f\x61\144", [$this, "\151\x73\101\154\162\145\x61\x64\x79\x43\141\143\150\145\x64"], 2)->addFilter("\157\160\164\151\x6d\151\172\x61\x74\x69\x6f\156\x5f\151\x73\x5f\x6f\x70\164\151\x6d\151\172\145\144", [$this, "\151\163\101\154\162\145\x61\144\x79\x43\x61\143\x68\145\144"], 2)->addFilter("\x6f\x70\164\x69\155\x69\x7a\141\164\x69\157\156\137\x63\x61\x63\150\145\x5f\161\x75\145\162\171\x5f\163\164\x72\151\156\147\163", [$this, "\142\x65\164\x74\145\162\116\147\151\156\170\103\157\x6d\x70\x61\164\151\142\151\x6c\151\x74\x79"]); return parent::addFilters(); } public function loadConstant() { goto V3akx; DQynT: gbOfl: goto GtbQs; iA4kU: define("\117\x50\124\111\115\111\x5a\x41\x54\111\117\x4e\137\x42\125\123\124\111\116\x47\137\120\x41\124\x48", untrailingslashit($path) . "\x2f\142\x75\163\x74\151\156\x67"); goto A6Tv3; WoFM4: $return = $this->getFilesystem()->mkdir(OPTIMIZATION_CACHE_PATH); goto iA4kU; V3akx: $return = false; goto QKJzs; YfFOh: return $return; goto vwc3w; vKZ9t: goto e4iWm; goto DQynT; A6Tv3: $return &= $this->getFilesystem()->mkdir(OPTIMIZATION_BUSTING_PATH); goto zOu2N; QKJzs: if ($path = Util::getConstant("\127\120\x5f\x43\x41\103\x48\x45\137\120\x41\124\x48")) { goto gbOfl; } goto pDhob; GtbQs: define("\117\120\124\x49\115\111\132\x41\124\x49\117\116\x5f\x43\101\103\x48\105\x5f\x50\x41\124\110", $path . "\57\167\x70\x2d\x63\141\x63\150\145"); goto WoFM4; zOu2N: e4iWm: goto YfFOh; pDhob: Notice::warning(sprintf(__("\45\x73\40\x63\x6f\x6e\x73\x74\x61\156\x74\40\x6e\157\x74\40\144\145\146\x69\x6e\x65\x64\54\40\x70\154\145\x61\163\x65\40\144\145\146\151\156\x65\x20\164\150\141\x74\40\151\156\40\167\160\55\143\157\156\x66\x69\147\x2e\160\x68\160\56", OPTIMIZATION_DOMAIN), "\74\143\x6f\x64\x65\x3e\x57\120\x5f\x43\x41\x43\x48\x45\x5f\120\101\x54\x48\74\57\143\157\x64\x65\76")); goto vKZ9t; vwc3w: } public function loadRequirement() { goto GtWoW; DBzoy: WPCache::getInstance(); goto Xixmt; pEoVO: IV2FQ: goto F1Erd; Xixmt: Advanced::getInstance(); goto pEoVO; GtWoW: if (!is_admin()) { goto IV2FQ; } goto cZx33; cZx33: Purge::getInstance(); goto DBzoy; F1Erd: } public function addToCronEvent($events) { $events["\157\x70\164\151\x6d\151\172\x61\x74\151\x6f\x6e\x5f\x70\165\162\x67\x65\x5f\164\151\x6d\x65\x5f\145\x76\x65\x6e\x74"] = __("\123\x63\150\145\144\x75\154\x65\x64\40\103\x61\143\150\x65\40\x50\x75\162\x67\x65", OPTIMIZATION_DOMAIN); return $events; } public function isAlreadyCached($let, $item) { goto WRZVK; Xi5sI: $cacheFilePath = Util::getConstant("\x4f\x50\x54\x49\x4d\111\x5a\101\x54\111\117\116\x5f\103\x41\103\110\105\x5f\120\x41\124\110") . $parsedUrl["\150\157\x73\x74"] . strtolower($parsedUrl["\160\x61\164\150"] . $parsedUrl["\161\165\145\x72\171"]) . "\151\x6e\144\145\x78" . $mobile . $https . "\x2e\x68\x74\155\x6c"; goto HP8sw; vwvXe: return $let; goto nXdFi; LVRj9: qeTv7: goto OYZmA; Y82P9: VGend: goto siJ04; ta44m: if (!$let) { goto xy3eF; } goto sMuov; ogohl: $parsedUrl["\161\165\x65\x72\x79"] = "\x23" . $parsedUrl["\161\165\145\x72\x79"] . "\x2f"; goto CuA2l; B2Cy9: $mobile = ArrayUtil::get($item, "\x6d\157\x62\x69\154\145") ? "\x2d\x6d\x6f\142\151\x6c\x65" : ''; goto Xi5sI; Y6ldP: $parsedUrl["\150\157\x73\x74"] = FormatUtil::maybeUrlNoDots($parsedUrl["\x68\157\163\x74"]); goto PmPVX; OYZmA: $url = ArrayUtil::get($item, "\165\x72\x6c", $item); goto iNeRr; RMOo0: if (!('' !== $parsedUrl["\161\165\145\x72\171"])) { goto oO9Ci; } goto ogohl; sMuov: if (isset($https)) { goto qeTv7; } goto W2_L7; CuA2l: oO9Ci: goto B2Cy9; W2_L7: $https = is_ssl() ? "\x2d\x68\x74\164\160\163" : ''; goto LVRj9; PmPVX: $parsedUrl["\160\x61\164\x68"] = trailingslashit($parsedUrl["\x70\141\164\x68"]); goto RMOo0; WRZVK: static $https; goto ta44m; HP8sw: $let = $this->getFilesystem()->exists($cacheFilePath); goto Y82P9; siJ04: xy3eF: goto vwvXe; ShwmO: $parsedUrl = FormatUtil::getParseUrl($url); goto Y6ldP; iNeRr: if (!is_string($url)) { goto VGend; } goto ShwmO; nXdFi: } public function addRejectUri($uris, $force) { return $uris; } public function addOptionsToConfig(array $configs, array $settings = []) { goto q_BWD; a4IMO: $configs["\143\141\x63\x68\x65\137\155\141\x6e\144\141\x74\x6f\x72\171\x5f\143\x6f\157\153\151\x65\x73"] = call_user_func("\x76\141\162\x5f\145\170\160\x6f\x72\x74", Setting::getCacheMandatoryCookies(), true); goto PF1ud; Ol529: $configs["\165\162\x6c\x5f\x6e\x6f\137\x64\157\164\163"] = 1; goto SwfbK; Fa4aJ: if (!FormatUtil::isUrlNoDots()) { goto T7TZk; } goto Ol529; bwTKa: qyML0: goto aKbnD; Nq1FR: HmXk9: goto lJLj2; SwfbK: T7TZk: goto MCOrI; lJLj2: $settings = wp_parse_args($settings, [Setting::CACHE_SSL => 0, Setting::CACHE_WEBP => 0, Setting::CACHE_REJECT_UA => '', Setting::CACHE_REJECT_URI => '', Setting::CACHE_QUERY_STRINGS => '', Setting::CACHE_REJECT_COOKIES => '']); goto tJVjm; MCOrI: return $configs; goto YOzup; e1TRI: $settings[Setting::CACHE_WEBP] = 0; goto Nq1FR; tJVjm: foreach ($settings as $option => $value) { goto ORMZB; RpYUI: wmTLU: goto G40_9; OQ5M9: $configs[$option] = $value; goto RpYUI; ORMZB: switch ($option) { case Setting::CACHE_SSL: case Setting::CACHE_WEBP: goto qjVx_; R93ER: Setting::getObject()::updateSetting(Setting::CACHE_SSL, "\157\x6e"); goto usW0b; usW0b: $value = 1; goto ILagd; a14Ou: mfswb: goto vExB8; d2ju5: if (!(1 !== $value)) { goto xwqBz; } goto Gd4RG; qjVx_: $value = (int) $value; goto EWj3i; vExB8: goto mjTgO; goto YxNf9; vtZJo: xwqBz: goto a14Ou; Gd4RG: if (!Util::isSSLWebsite()) { goto HL29G; } goto R93ER; EWj3i: if (!(Setting::CACHE_SSL === $option)) { goto mfswb; } goto d2ju5; ILagd: HL29G: goto vtZJo; YxNf9: case Setting::CACHE_REJECT_URI: $value = StringUtil::addAroundQuotes(Setting::getCacheRejectUri()); goto mjTgO; case Setting::CACHE_QUERY_STRINGS: $value = call_user_func("\x76\x61\162\137\x65\x78\160\157\x72\x74", Setting::getCacheQueryString(), true); goto mjTgO; case Setting::CACHE_REJECT_COOKIES: goto NmeLq; Ltsar: $value = preg_replace("\x2f\134\174" . $loggedInCookie . "\134\x7c\x2f", "\x7c", "\x7c" . $value . "\174"); goto TUONv; Eeowt: uSE2V: goto JMSLK; vcq7W: $loggedInCookie = explode(COOKIEHASH, LOGGED_IN_COOKIE); goto e7u3e; tQ9s3: $loggedInCookie = implode("\x5b\136\x7c\x5d\x2a", $loggedInCookie); goto Ltsar; e7u3e: $loggedInCookie = array_map("\x70\162\x65\147\137\161\x75\157\164\x65", $loggedInCookie); goto tQ9s3; c__Tx: goto mjTgO; goto hsw3B; YHYas: if (!($value && Setting::isCacheLoggedUser())) { goto uSE2V; } goto vcq7W; JMSLK: $value = StringUtil::addAroundQuotes($value); goto c__Tx; NmeLq: $value = Setting::getCacheRejectCookies(); goto YHYas; TUONv: $value = trim($value, "\174"); goto Eeowt; hsw3B: case Setting::CACHE_REJECT_UA: $value = StringUtil::addAroundQuotes(Setting::getCacheRejectUA()); goto mjTgO; default: $value = null; } goto MWNxG; PVM00: if (!(null !== $value)) { goto wmTLU; } goto OQ5M9; G40_9: vf0sS: goto Ohlb0; gBpyL: mjTgO: goto PVM00; MWNxG: mBl_3: goto gBpyL; Ohlb0: } goto iYr5e; aKbnD: if (!(!isset($settings[Setting::CACHE_WEBP]) && $this->applyFilters("\157\x70\x74\x69\x6d\151\172\141\164\151\x6f\x6e\x5f\x63\x61\143\x68\145\x5f\144\x69\x73\x61\x62\x6c\145\x5f\x77\145\142\x70\137\x63\x61\x63\150\145", false))) { goto HmXk9; } goto e1TRI; iYr5e: Na28f: goto SIDGs; q_BWD: if (!$this->applyFilters("\x6f\x70\164\x69\x6d\151\x7a\x61\164\x69\157\x6e\x5f\143\x6f\155\x6d\x6f\x6e\137\x63\x61\x63\150\x65\x5f\154\x6f\147\147\145\x64\137\165\x73\x65\x72\x73", false)) { goto qyML0; } goto LbXuY; LbXuY: $configs["\143\x6f\x6d\x6d\x6f\156\137\143\x61\143\150\x65\x5f\154\x6f\147\147\x65\144\137\165\163\145\x72\x73"] = 1; goto bwTKa; PF1ud: $configs["\143\x61\143\x68\145\x5f\144\x79\156\141\x6d\151\143\x5f\143\157\157\x6b\x69\145\x73"] = call_user_func("\166\x61\x72\x5f\145\x78\x70\x6f\x72\164", Setting::getCacheDynamicCookies(), true); goto Fa4aJ; SIDGs: $configs["\143\141\x63\x68\145\137\151\147\156\x6f\x72\x65\x64\x5f\x70\x61\x72\141\155\x65\x74\145\162\x73"] = call_user_func("\166\x61\x72\137\145\x78\x70\x6f\x72\x74", Setting::getIgnoredParameters(), true); goto a4IMO; YOzup: } public function commentCookieLifetime($lifetime) { $lifetime = $this->applyFilters("\x6f\x70\x74\x69\x6d\151\172\x61\x74\151\x6f\156\137\x63\141\x63\150\x65\x5f\143\x6f\155\x6d\145\x6e\164\x5f\x63\x6f\x6f\x6b\151\x65\137\154\x69\x66\x65\x74\151\155\145", 3 * MINUTE_IN_SECONDS); return $lifetime; } public function addCacheQueryStrings($queryStrings) { goto L2xUx; dFpKu: $queryStrings = array_merge($queryStrings, $cacheQueryStrings); goto fpUZa; fpUZa: return $queryStrings; goto FOWyJ; L2xUx: $cacheQueryStrings = Setting::getCacheQueryString(); goto dFpKu; FOWyJ: } public function addToRequireDirectory($directories) { goto p0LpC; MU5ej: return $directories; goto v7MIK; n0lOS: $directories[] = Util::getConstant("\x4f\120\x54\x49\x4d\111\132\x41\x54\111\117\x4e\x5f\102\x55\x53\124\x49\116\107\x5f\120\101\124\x48"); goto MU5ej; p0LpC: $directories[] = Util::getConstant("\x4f\120\124\111\x4d\x49\x5a\101\124\x49\x4f\x4e\x5f\103\101\103\x48\x45\x5f\x50\x41\x54\110"); goto bMDtT; bMDtT: $directories[] = Util::getConstant("\117\120\124\x49\115\x49\x5a\x41\x54\x49\x4f\116\x5f\103\x4f\116\106\111\107\x5f\x50\101\124\x48"); goto n0lOS; v7MIK: } public function betterNginxCompatibility($queryStrings) { goto NV48A; NV48A: global $is_nginx; goto vDG6A; je7ek: $queryStrings[] = "\161"; goto pDbNg; vDG6A: if (!$is_nginx) { goto moEVE; } goto je7ek; tn7KZ: return $queryStrings; goto XnPbG; pDbNg: moEVE: goto tn7KZ; XnPbG: } public function updateSslOptionAfterSaveHomeUrl(array $old, array $new) { goto jp1g8; IqQkk: $scheme = FormatUtil::extractUrlComponent($new, PHP_URL_SCHEME); goto ak1xz; gUbOb: s0heF: goto u9Klq; ak1xz: Setting::getObject()::updateSetting(Setting::CACHE_SSL, "\x68\x74\x74\x70\x73" === $scheme ? 1 : 0); goto gUbOb; jp1g8: if (!($old !== $new && Setting::isCacheSSL())) { goto s0heF; } goto IqQkk; u9Klq: } }
