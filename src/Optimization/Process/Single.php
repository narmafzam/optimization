<?php
 namespace Optimization\Process; use Boilerplate\Process\Async; use Boilerplate\Util\ArrayUtil; use Boilerplate\Util\CommonUtil; use Optimization\Util\Util; class Single extends Async { const SINGLE_PROCESS_PERMALINKS = "\x6f\160\164\x69\155\151\x7a\x61\x74\x69\x6f\156\x5f\160\x72\x6f\x63\x65\x73\163\x5f\163\151\x6e\x67\154\145\x5f\160\145\162\x6d\141\154\x69\x6e\153\163"; public function __construct() { $this->action = "\157\160\164\151\x6d\151\x7a\141\x74\151\157\156\137\x73\x69\x6e\147\x6c\145\x5f\x70\162\157\x63\145\x73\163"; parent::__construct(); } public function addActions() : self { $this->addAction("\151\156\151\x74", [$this, "\143\141\156\123\164\141\x72\164\120\162\x6f\x63\x65\x73\163"]); return parent::addActions(); } public function canStartProcess() { goto rjDsz; i9KBW: $query = ArrayUtil::get($parsed, "\161\x75\x65\162\x79", []); goto mmKtI; BL153: $permalink = CommonUtil::getRequestedUrl(true); goto e4o_y; jY3Yw: XnpiX: goto lCL4p; gnAFa: $parsed = wp_parse_url($permalink); goto i9KBW; HS7E4: $this->setData(["\160\145\162\x6d\x61\154\151\x6e\153" => $permalink])->dispatch(); goto e4y15; mmGxu: if (isset($permalinks[$permalink])) { goto eltFR; } goto gnAFa; L1h65: eltFR: goto jY3Yw; e4y15: Ci8CM: goto L1h65; rjDsz: if (is_admin()) { goto XnpiX; } goto BL153; mmKtI: if (!(!$query && !$this->applyFilters("\x6f\x70\x74\151\155\151\172\141\x74\151\157\x6e\137\151\x73\137\157\x70\164\x69\155\151\172\145\x64", false, $permalink))) { goto Ci8CM; } goto nFvTp; e4o_y: $permalinks = $this->getPermalinks(); goto mmGxu; nFvTp: $this->updateOption($permalink, false); goto HS7E4; lCL4p: } protected function handle() { goto p5xs0; i2gi_: if (!$permalink) { goto kswu2; } goto LGmF0; p5xs0: $permalink = CommonUtil::getRequest("\160\145\x72\x6d\141\154\x69\x6e\153"); goto i2gi_; LGmF0: $this->updateOption($permalink, true); goto CgSIW; CgSIW: Util::sendOptRequest($permalink); goto dHatp; dHatp: kswu2: goto o1BXe; o1BXe: } public function getPermalinks() : array { return (array) CommonUtil::getOption(self::SINGLE_PROCESS_PERMALINKS, []); } public function updateOption($permalink, $remove = false) { goto NWgCq; NWgCq: $permalinks = $this->getPermalinks(); goto CJKUi; jJ_Mx: ArrayUtil::unset($permalinks, $permalink); goto B7KKM; HOjwJ: A8Qjk: goto jJ_Mx; HoZzA: $permalinks[$permalink] = 1; goto gCDB4; B7KKM: Yqcfw: goto lnMwD; lnMwD: CommonUtil::updateOption(self::SINGLE_PROCESS_PERMALINKS, $permalinks); goto id9_C; gCDB4: goto Yqcfw; goto HOjwJ; CJKUi: if ($remove) { goto A8Qjk; } goto HoZzA; id9_C: } }
