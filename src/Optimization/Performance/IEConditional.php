<?php
 namespace Optimization\Performance; class IEConditional extends Common { const IE_PATTERN = "\x2f\x3c\41\55\55\134\x5b\151\146\x5b\136\x5c\x5d\x5d\52\77\134\135\76\x2e\52\x3f\x3c\x21\134\133\145\x6e\x64\151\x66\134\x5d\55\x2d\76\x2f\x69\x73"; const OPTIMIZATION_CONDITIONAL = "\x3c\41\55\x2d\x7b\173\x4f\x50\124\x49\115\111\x5a\101\124\x49\117\x4e\137\x43\117\116\x44\111\124\x49\x4f\116\101\x4c\x7d\x7d\55\x2d\76"; protected ?array $conditionals = []; public function addFilters() : self { $this->addFilter("\157\x70\164\x69\x6d\151\172\141\164\x69\x6f\156\x5f\142\x75\146\146\145\162\137\160\x72\x6f\143\145\163\x73", [$this, "\145\170\x74\162\141\x63\164"], 1, 1)->addFilter("\157\160\x74\x69\155\x69\x7a\x61\x74\151\x6f\156\137\x62\165\x66\x66\145\x72\x5f\x70\162\x6f\143\145\163\x73", [$this, "\151\x6e\152\145\x63\164"], 1, 34); return parent::addFilters(); } public function extract(string $VoLyz) { goto ohctg; x2jPf: L_AcZ: goto rhjvh; N2fSO: d1b1c: goto b1ZyV; rhjvh: $VoLyz = preg_replace(self::IE_PATTERN, self::OPTIMIZATION_CONDITIONAL, $VoLyz); goto N2fSO; s1BPN: foreach ($upoja[0] as $GXBk9) { $this->conditionals[] = $GXBk9; V1X0R: } goto x2jPf; b1ZyV: return $VoLyz; goto fqLyL; ohctg: if (!preg_match_all(self::IE_PATTERN, $VoLyz, $upoja)) { goto d1b1c; } goto s1BPN; fqLyL: } public function inject(string $VoLyz) { goto MNqg_; kb_11: w1R0S: goto HRa9l; ntUh_: return $VoLyz; goto dZnCz; MNqg_: if (!$this->hasConditionalTag($VoLyz)) { goto Hxh3k; } goto vn219; HRa9l: Hxh3k: goto ntUh_; vn219: foreach ($this->conditionals as $GXBk9) { goto WnkXS; kb521: $VoLyz = $this->replaceConditionalTag($VoLyz, $GXBk9); goto bNGCA; WnkXS: if (!preg_match("\100\136\x28\x3f\74\157\x70\145\x6e\151\156\x67\76\74\41\x2d\55\134\133\x69\146\x5b\136\134\135\135\52\77\134\135\x3e\134\x73\x2a\77\x28\77\x3a\x3c\x21\x2d\55\x3e\51\77\134\x73\52\74\x73\143\x72\151\160\164\50\77\x3a\x5c\163\x5b\x5e\76\x5d\x2a\x3f\76\x29\x29\x5c\x73\52\50\77\x3c\x63\x6f\156\164\x65\156\164\76\x2e\x2a\x3f\x29\134\163\52\x28\x3f\x3c\x63\154\157\163\x69\156\x67\x3e\x3c\57\163\143\162\x69\x70\x74\76\134\163\x2a\50\77\x3a\74\41\55\x2d\51\x3f\134\163\x2a\77\x3c\x21\x5c\x5b\x65\156\144\x69\146\x5c\135\x2d\55\x3e\x29\x24\100\151\163", $GXBk9, $upoja)) { goto MHB5C; } goto NQ7fU; NQ7fU: $GXBk9 = $upoja["\157\160\x65\156\x69\x6e\147"] . preg_replace("\43\x28\77\74\x21\x5c\x5c\51\50\134\x24\x7c\134\134\51\x23", "\x5c\134\x24\x31", $upoja["\x63\x6f\156\x74\145\x6e\x74"]) . $upoja["\x63\154\x6f\x73\x69\156\x67"]; goto H9MHV; H9MHV: MHB5C: goto kb521; bNGCA: TvSI0: goto e2G3O; e2G3O: } goto kb_11; dZnCz: } private function hasConditionalTag(string $VoLyz) { return false !== strpos($VoLyz, self::OPTIMIZATION_CONDITIONAL); } private function replaceConditionalTag(string $VoLyz, string $Lu_9j) { $aBhsq = strpos($VoLyz, self::OPTIMIZATION_CONDITIONAL); return substr_replace($VoLyz, $Lu_9j, $aBhsq, strlen(self::OPTIMIZATION_CONDITIONAL)); } }
