<?php
 namespace Optimization\Performance; use Boilerplate\DOMCrawler; use Boilerplate\Util\CommonUtil; use Boilerplate\Util\ThemeUtil; use DOMElement; use Optimization\Notice; use Optimization\Util\Util; class Merge extends Common { public function __construct() { goto NzdgL; NzdgL: if (!$this->loadConstant()) { goto Tc5z7; } goto Bfyx5; Bfyx5: parent::__construct(); goto lZhrr; lZhrr: Tc5z7: goto M2Spl; M2Spl: } public function addFilters() : self { $this->addFilter("\x6f\160\164\x69\155\x69\x7a\141\164\151\x6f\x6e\x5f\142\x75\146\146\x65\x72\137\x70\162\157\x63\145\163\163", [$this, "\x70\141\x63\x6b\x53\x74\x79\x6c\x65\x73\x68\145\x65\x74\163"], 1, 0)->addFilter("\x6f\x70\x74\x69\155\x69\x7a\141\x74\151\x6f\x6e\x5f\x62\165\146\146\x65\162\x5f\160\x72\157\143\x65\163\x73", [$this, "\x70\x61\143\x6b\x53\143\162\151\x70\x74\163"], 1, 0); return parent::addFilters(); } public function loadConstant() { goto Hv3Wl; Lqnxs: define("\x4f\120\124\111\115\x49\132\101\x54\x49\117\x4e\x5f\x4d\105\x52\107\x45\x5f\120\101\x54\110", "{$GuTuU}\57\155\145\162\147\145"); goto TerZB; erZib: if ($GuTuU = Util::getConstant("\x57\x50\137\103\x41\x43\x48\105\137\x50\x41\124\x48")) { goto Dh4fH; } goto Fg738; Hv3Wl: $pHq9s = false; goto erZib; zC7bY: return $pHq9s; goto moXDa; MxsRg: Dh4fH: goto Lqnxs; TerZB: $pHq9s = $this->getFilesystem()->mkdir(OPTIMIZATION_MERGE_PATH); goto Lk1jD; bWlGy: goto x2DA1; goto MxsRg; Lk1jD: x2DA1: goto zC7bY; Fg738: Notice::warning(sprintf(__("\x25\163\x20\143\x6f\x6e\163\x74\x61\156\x74\40\156\157\x74\x20\144\x65\146\x69\156\x65\144\54\x20\160\154\145\x61\163\145\40\x64\x65\146\151\x6e\x65\x20\164\x68\x61\x74\x20\x69\156\x20\x77\160\55\143\x6f\x6e\x66\151\x67\x2e\x70\150\x70\56", OPTIMIZATION_DOMAIN), "\74\143\157\144\x65\76\x57\x50\x5f\103\x41\x43\x48\105\x5f\120\x41\x54\110\x3c\x2f\x63\x6f\x64\145\x3e")); goto bWlGy; moXDa: } public function packScripts($vwY7Y) { return $vwY7Y; } public function packStylesheets($vwY7Y) { goto HXb82; ooxS8: return $vwY7Y; goto tTJ5M; vMt_t: $vwY7Y = str_replace("\x3c\57\x68\145\141\x64\76", "{$uL8fN}\74\x2f\150\x65\141\144\x3e", $vwY7Y); goto cA93C; OGbRk: NYo5R: goto ooxS8; xBWmq: $vwY7Y = DOMCrawler::removeElements($vwY7Y, "\x5b\144\141\164\x61\x2d\x6d\145\162\147\145\144\x3d\x31\135"); goto r2yy2; HXb82: $QHtFv = $this->getAssetsContent($vwY7Y, "\x6c\151\x6e\153\133\162\145\x6c\x3d\163\164\171\154\x65\163\150\145\x65\x74\x5d", $EOJKs); goto SfsOF; r2yy2: $uL8fN = ThemeUtil::generateElement("\x6c\x69\156\153", ["\150\162\x65\146" => $hgTz4, "\162\145\154" => "\163\164\x79\x6c\145\x73\x68\145\145\x74", "\x69\144" => $EOJKs], false); goto vMt_t; i1GkZ: if (!($hgTz4 = $this->createFile("{$EOJKs}\x2e\143\163\x73", $QHtFv))) { goto A7vB3; } goto xBWmq; cA93C: A7vB3: goto OGbRk; SfsOF: if (!$QHtFv) { goto NYo5R; } goto i1GkZ; tTJ5M: } public function getAssetsContent(&$vwY7Y, $C2Sin, &$FaQSt = null) { goto vJ9qo; oiFoY: $B6fu9 = ''; goto DzLG2; ygCuM: return $B6fu9; goto JHu27; XS2g9: foreach ($Lwbqq as $GuTuU) { $B6fu9 .= $yb0zb->getContent($GuTuU); TIfJn: } goto y0jsE; NHGrG: oGhhJ: goto ygCuM; Q900c: sort($FaQSt); goto NPjg4; o1YtC: if (!(count($Lwbqq) > $ROkvQ)) { goto oGhhJ; } goto rjTIn; t1BP5: $vwY7Y = DOMCrawler::elementsMap($vwY7Y, $C2Sin, function (DOMElement $oMvxH) use(&$Lwbqq, $hOMMz) { goto G31hl; G31hl: $ag6pP = $oMvxH->getAttribute("\x68\x72\x65\146"); goto PUdRu; yuEd0: RKN9A: goto OJqV9; OJqV9: return $oMvxH; goto a5r9n; PUdRu: if (!$ag6pP) { goto RKN9A; } goto soVD1; soVD1: foreach ($hOMMz as $GuTuU => $XKqYs) { goto tr80F; VRJIp: E32wH: goto tfDgy; tr80F: if (!(strpos($ag6pP, $XKqYs) !== false)) { goto Wnmgj; } goto XVHwX; WJuoZ: Wnmgj: goto VRJIp; XVHwX: $Lwbqq[] = str_replace($hOMMz, $GuTuU, $ag6pP); goto haw84; haw84: $oMvxH->setAttribute("\x64\141\x74\x61\55\x6d\x65\x72\x67\145\144", 1); goto WJuoZ; tfDgy: } goto KHIg2; KHIg2: G6hQ9: goto yuEd0; a5r9n: }); goto oiFoY; K5KN6: $hOMMz = [CommonUtil::getConstant("\x57\x50\137\x43\117\x4e\x54\x45\116\124\137\x44\111\122") => site_url() . "\57\167\160\55\x63\x6f\156\164\145\x6e\x74", CommonUtil::getConstant("\101\x42\123\120\101\124\110") . $qWwmN => site_url() . "\57{$qWwmN}"]; goto t1BP5; rjTIn: $FaQSt = array_map("\x62\141\x73\145\156\141\x6d\145", $Lwbqq); goto Q900c; vJ9qo: $Lwbqq = []; goto pGpDS; y0jsE: HNmBM: goto NHGrG; pGpDS: $qWwmN = CommonUtil::getConstant("\127\x50\x49\116\103"); goto K5KN6; dTJSa: $yb0zb = $this->getFilesystem(); goto XS2g9; NPjg4: $FaQSt = md5(implode('', $FaQSt)); goto dTJSa; DzLG2: $ROkvQ = (int) $this->applyFilters("\x6f\x70\x74\151\x6d\151\x7a\141\164\x69\x6f\x6e\137\x70\145\162\146\x6f\x72\x6d\141\x6e\x63\x65\x5f\x6d\x65\x72\147\x65\x5f\164\x68\x72\x65\x73\x68\x6f\x6c\144", 2); goto o1YtC; JHu27: } public function createFile($EOJKs, $B6fu9) { goto Y39lg; IZfp9: $tvPcG = CommonUtil::getConstant("\x57\x50\137\103\x4f\116\x54\105\116\124\137\x44\111\122"); goto enOmt; Ehuni: $hgTz4 = false; goto uqTZI; uqTZI: if (!($EOJKs && $GuTuU)) { goto uYywv; } goto IZfp9; XBxwG: if (!($tvPcG && ($this->getFilesystem()->exists($D2KXr) || $this->getFilesystem()->putContent($D2KXr, $B6fu9)))) { goto ohBSe; } goto yXYKA; yXYKA: $hgTz4 = content_url() . str_replace($tvPcG, '', $D2KXr); goto y7Js4; enOmt: $D2KXr = "{$GuTuU}\x2f{$EOJKs}"; goto XBxwG; Y39lg: $GuTuU = CommonUtil::getConstant("\x4f\x50\x54\111\x4d\x49\132\101\124\x49\x4f\x4e\x5f\115\x45\122\x47\x45\137\x50\x41\x54\x48"); goto Ehuni; y7Js4: ohBSe: goto g3tlw; ttxgX: return $hgTz4; goto CV0sD; g3tlw: uYywv: goto ttxgX; CV0sD: } }
