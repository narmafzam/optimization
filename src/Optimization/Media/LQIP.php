<?php
 namespace Optimization\Media; use Boilerplate\DOMCrawler; use Boilerplate\Util\ArrayUtil; use Boilerplate\Util\PostUtil; use Boilerplate\Util\ThemeUtil; use DOMElement; class LQIP extends Common { const IMAGE_SIZE = "\x6c\x71\x69\x70\137\163\151\x7a\145"; const ATTACHMENT_META = "\x6f\160\164\151\155\151\x7a\x61\164\x69\x6f\x6e\x5f\x6d\145\144\x69\x61\x5f\x6c\x71\151\x70\x5f\155\x65\164\x61\144\x61\164\x61"; public function addActions() : self { $this->addAction("\x61\146\164\x65\x72\137\x73\x65\164\x75\x70\x5f\164\x68\145\x6d\145", [$this, "\141\x64\x64\x49\x6d\x61\x67\x65\x53\x69\172\145"], 0, 9999); return parent::addActions(); } public function addFilters() : self { $this->addFilter("\x68\x65\141\144\x65\x72\137\x68\145\141\x64\137\163\164\171\x6c\145\x73", [$this, "\x61\x64\144\123\164\171\x6c\145\x73"], 1, 99)->addFilter("\167\160\137\x67\x65\x6e\x65\162\x61\x74\x65\137\141\x74\164\141\143\x68\x6d\145\156\x74\137\155\145\164\x61\x64\141\x74\141", [$this, "\147\145\x6e\145\x72\141\x74\145"], 2, 10)->addFilter("\x6f\x70\x74\x69\155\151\x7a\141\164\x69\157\x6e\x5f\142\x75\146\x66\145\162\x5f\160\x72\157\x63\x65\163\x73", [$this, "\x61\x64\144\120\x6c\x61\143\145\150\x6f\154\144\145\162\x54\x6f\x49\x6d\x61\x67\145\x73"], 1, 20)->addFilter("\157\x70\x74\151\x6d\x69\x7a\141\164\x69\x6f\x6e\x5f\x62\165\x66\146\145\x72\x5f\156\x6f\x74\x5f\x70\162\157\143\x65\x73\163\145\x64", [$this, "\x61\x64\144\120\x6c\141\x63\x65\x68\x6f\154\144\x65\x72\x54\x6f\x49\155\x61\147\x65\x73"], 1, 20); return parent::addFilters(); } public function addImageSize() { add_image_size(self::IMAGE_SIZE, 30, 20); } public function addStyles($QHtFv) { $QHtFv .= $this->renderTwigTemplate("\163\164\171\154\145\x73\56\x63\163\x73"); return $QHtFv; } public function addPlaceholderToImages($vwY7Y) { $vwY7Y = preg_replace_callback("\x2f\x3c\x69\x6d\147\x2e\52\77\x5b\x5e\134\76\x5d\x2b\x3e\57", function ($upoja) { goto uqYpl; fqOSZ: $eQ9Gc = ArrayUtil::get($Lh3fh, "\x77\151\144\164\x68", 0); goto ZqmmJ; O0sRm: XX3As: goto sTN07; qyHZM: ZWH0a: goto c_sRQ; et5ZE: $nQqAP = DOMCrawler::addAttribute($nQqAP, ["\151\x6d\x67" => ["\143\154\141\x73\163" => "\157\160\x61\143\x69\164\x79\x2d\164\162\x61\156\x73\x69\164\151\157\x6e"]]); goto fqOSZ; hXzAU: $Lh3fh = DOMCrawler::getAttributes($nQqAP, "\x69\155\x67"); goto vQeo6; uqYpl: $nQqAP = ArrayUtil::get($upoja, 0); goto CiR6U; vQeo6: $Q6Bxn = ArrayUtil::get($Lh3fh, "\x64\141\164\x61\x2d\x69\144"); goto buCTc; bJaDk: $qLxZn = PostUtil::getMeta(self::ATTACHMENT_META, true, $Q6Bxn); goto jnQuM; GmJJW: $qLxZn = ThemeUtil::generateElement("\x73\160\141\156", ["\163\164\x79\154\x65" => "\x62\x61\143\x6b\147\x72\157\x75\x6e\144\x2d\x69\x6d\x61\x67\x65\72\40\x75\x72\154\50\47{$qLxZn}\x27\51\x3b", "\x63\x6c\141\163\163" => trim("\x62\x67\55\x63\157\166\145\x72\40\x6f\x70\141\x63\x69\x74\x79\x2d\x74\162\x61\156\163\151\x74\x69\x6f\156\40\x69\x6d\x67\55\142\154\165\x72\40\167\55\x31\60\60\40\150\55\x31\60\x30")]); goto et5ZE; jnQuM: if (!$qLxZn) { goto ZWH0a; } goto GmJJW; buCTc: if (!($Q6Bxn && wp_attachment_is_image($Q6Bxn))) { goto X59AO; } goto bJaDk; sTN07: return $nQqAP; goto yyEJ3; ZqmmJ: $nQqAP = ThemeUtil::generateElement("\144\151\166", ["\x63\x6c\x61\x73\163" => "\160\154\141\143\x65\150\x6f\x6c\144\x65\162\55\143\157\x6e\164\x61\x69\x6e\x65\x72", "\163\x74\x79\154\x65" => "\x6d\x69\x6e\55\167\151\144\x74\x68\72\40{$eQ9Gc}\x70\x78"], true, [$nQqAP, $qLxZn]); goto qyHZM; c_sRQ: X59AO: goto O0sRm; CiR6U: if (!$nQqAP) { goto XX3As; } goto hXzAU; yyEJ3: }, $vwY7Y); return $vwY7Y; } public function generate($EaiGQ, $KcXuZ) { goto e8rdv; Lr9UH: $wpkb5 = str_replace(basename($Lu_9j), $EOJKs, get_attached_file($KcXuZ)); goto xDxZK; PwkXh: $EOJKs = ArrayUtil::getByPath($EaiGQ, "\x73\x69\172\145\163\x2e" . self::IMAGE_SIZE . "\56\146\x69\154\145"); goto R5C24; u4epd: $w5tII = ArrayUtil::getByPath($EaiGQ, "\x73\x69\x7a\145\x73\56" . self::IMAGE_SIZE . "\56\x6d\x69\155\x65\x2d\164\x79\160\145"); goto fu2yq; e8rdv: $Lu_9j = ArrayUtil::get($EaiGQ, "\x66\151\154\145"); goto PwkXh; xDxZK: if (!$this->getFilesystem()->exists($wpkb5)) { goto s8zJc; } goto u4epd; fu2yq: $oZEcq = "\144\x61\164\141\x3a\x69\155\x61\x67\x65\x2f{$w5tII}\x3b\142\141\x73\145\66\x34\x2c" . base64_encode($this->getFilesystem()->getContent($wpkb5)); goto yg5kv; eTnlH: s8zJc: goto sHTrw; BbsS_: return $EaiGQ; goto eJ7mt; gnnNF: PostUtil::addMeta(self::ATTACHMENT_META, $oZEcq, $KcXuZ); goto QceUd; sHTrw: S8oKn: goto BbsS_; yg5kv: if (!$oZEcq) { goto qrmRt; } goto gnnNF; R5C24: if (!($EOJKs && $Lu_9j)) { goto S8oKn; } goto Lr9UH; QceUd: qrmRt: goto eTnlH; eJ7mt: } }
