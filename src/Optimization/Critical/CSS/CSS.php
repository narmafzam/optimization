<?php
 namespace Optimization\Critical\CSS; use Boilerplate\DOMCrawler; use Boilerplate\Util\ArrayUtil; use Boilerplate\Util\ThemeUtil; use Boilerplate\Util\UserUtil; class CSS extends Common { const CRITICAL_CSS_GENERATION_ = "\x6f\x70\164\x69\155\151\x7a\141\164\151\x6f\156\137\x63\x72\151\x74\151\143\x61\x6c\x5f\143\x73\x73\137\x67\145\x6e\x65\x72\x61\164\x69\x6f\x6e\x5f"; const RUNNING_PROCESS_TRANSITION = self::CRITICAL_CSS_GENERATION_ . "\x70\162\x6f\x63\145\163\x73\x5f\x72\x75\x6e\156\x69\x6e\x67"; const CRITICAL_CSS_GENERATION_DONE = self::CRITICAL_CSS_GENERATION_ . "\x64\x6f\156\145"; public function __construct() { $this->loadRequirement(); parent::__construct(); } public function addActions() : self { $this->addAction("\x6f\160\x74\151\155\151\x7a\141\x74\x69\157\156\137\x62\165\x66\x66\x65\x72\137\160\162\157\x63\x65\163\x73", [$this, "\x65\x78\x74\x72\x61\x63\164\x43\x72\x69\x74\151\143\x61\x6c"]); return parent::addActions(); } public function addFilters() : self { $this->addFilter("\x64\157\137\143\141\x63\x68\x65\x5f\x67\x65\156\x65\x72\x61\164\145\137\x63\141\143\x68\151\156\147\137\146\x69\x6c\145\163", [$this, "\151\x73\117\x70\x74\151\x6d\151\172\x65\x64"], 0)->addFilter("\157\x70\x74\x69\x6d\151\x7a\141\164\151\157\x6e\x5f\x69\163\x5f\157\160\164\x69\155\151\172\x65\x64", [$this, "\x69\163\x4f\160\x74\151\x6d\151\x7a\x65\144"], 1, 0)->addFilter("\x63\163\x73\137\141\x73\x73\145\x74\x5f\x75\162\x6c", [$this, "\155\141\x79\142\x65\104\151\163\x61\142\154\x65\x48\145\141\x64\103\x73\x73\106\x69\x6c\x65"], 1, 999)->addFilter("\x62\157\151\x6c\145\162\160\154\141\164\145\137\x61\x73\x73\145\164\x5f\x69\156\154\151\x6e\145\x5f\163\164\171\x6c\145\x73", [$this, "\x61\x64\x64\123\164\x79\x6c\145\124\157\x48\x65\x61\144"], 1, 99)->addFilter("\157\160\164\x69\x6d\151\x7a\x61\x74\x69\x6f\x6e\137\x63\x72\x69\164\x69\x63\x61\x6c\137\x63\163\x73\x5f\151\163\x5f\x6f\160\164\151\155\151\x7a\145\144", [$this, "\151\163\117\160\x74\x69\x6d\151\172\x65\x64"], 1, 0)->addFilter("\164\x68\x65\155\x65\137\x66\x6f\x6f\x74\145\162\137\x6c\157\x61\144\x5f\152\163\137\154\157\x61\144\145\162\x5f\167\x69\x74\150\x5f\145\166\x65\156\x74", [$this, "\x69\x73\117\160\x74\x69\x6d\151\172\145\144"], 1, 0); return parent::addFilters(); } public function isOptimized($NxGo9 = true) { goto E5Ex5; c7t_S: $NxGo9 = !UserUtil::isUserLoggedIn() && $this->getFilesystem()->exists(Util::getFullName()); goto dvW1j; E5Ex5: if ($NxGo9) { goto oXEOh; } goto c7t_S; dvW1j: oXEOh: goto by9Wg; by9Wg: return $NxGo9; goto A0TR5; A0TR5: } public function maybeDisableHeadCssFile($hgTz4) { goto shKnh; ALAOh: $hgTz4 = ''; goto YYSpv; paQz2: pazSW: goto dZLSp; azTuo: $B6fu9 = $this->getFilesystem()->getContent($FF3Wu); goto rqB0I; FrA3x: $FF3Wu = Util::getFullName(); goto azTuo; shKnh: if (!$this->isOptimized(false)) { goto pazSW; } goto FrA3x; dZLSp: return $hgTz4; goto Snt1W; YYSpv: xBtxL: goto paQz2; rqB0I: if (!trim($B6fu9)) { goto xBtxL; } goto ALAOh; Snt1W: } public function addStyleToHead($QHtFv) { goto HV_Dq; JUDk0: if (!is_string($B6fu9)) { goto kNkXB; } goto RIMRR; yJ4Go: kNkXB: goto vf1lw; tvoyR: $FF3Wu = Util::isGenerated(); goto mF3mn; HV_Dq: if (!$this->isOptimized(false)) { goto u1ftP; } goto tvoyR; mF3mn: $B6fu9 = $this->getFilesystem()->getContent($FF3Wu); goto JUDk0; vf1lw: u1ftP: goto vY8p4; vY8p4: return $QHtFv; goto VHX9l; RIMRR: $QHtFv .= $B6fu9; goto yJ4Go; VHX9l: } public function loadRequirement() { Purge::getInstance(); Extractor::getInstance(); } public function extractCritical(?string $vwY7Y) { goto bEsl6; PDwxb: if (!($FF3Wu = Util::isNotGenerated())) { goto ohY36; } goto Xf0Lu; vjRgz: $vwY7Y = DOMCrawler::addChild($vwY7Y, "\x68\x65\141\x64", $uQihC); goto D2g5u; zrxdy: $C2Sin = "\x73\x74\x79\154\x65\x23\x62\157\151\154\145\x72\x70\x6c\x61\164\x65\x5f\151\156\x6c\x69\x6e\x65\x5f\163\164\171\154\x65"; goto quBnh; uk39h: $uQihC = ThemeUtil::generateElement("\163\164\171\154\145", [], true, $uQihC); goto vjRgz; V2QZV: ZXbbQ: goto uk39h; NX830: goto C67LC; goto V2QZV; K3zTf: return $vwY7Y; goto TLnYe; D2g5u: C67LC: goto Y5ReX; Xf0Lu: $uQihC = Extractor::getInstance()->extract($vwY7Y, $FF3Wu, true); goto hMMAA; bEsl6: if (!$this->applyFilters("\x6f\160\x74\151\155\151\172\x61\x74\151\157\156\137\x63\162\x69\164\x69\143\x61\154\137\x63\x73\163\x5f\143\x61\156\x5f\x65\x78\x74\x72\x61\143\x74", true)) { goto z1sAX; } goto PDwxb; qZSJw: $vwY7Y = DOMCrawler::updateContent($vwY7Y, $C2Sin, $uQihC); goto NX830; quBnh: if (!DOMCrawler::has($vwY7Y, $C2Sin)) { goto ZXbbQ; } goto qZSJw; Y5ReX: Sm2Bs: goto dA3xm; JixwR: z1sAX: goto K3zTf; hMMAA: if (!$uQihC) { goto Sm2Bs; } goto zrxdy; dA3xm: ohY36: goto JixwR; TLnYe: } }
