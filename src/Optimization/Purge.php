<?php
 namespace Optimization; use Boilerplate\Util\AjaxUtil; use Boilerplate\Util\CommentUtil; use Boilerplate\Util\CommonUtil; use Boilerplate\Util\PluginUtil; use Boilerplate\Util\PostUtil; use Boilerplate\Util\TaxonomyUtil; use Boilerplate\Util\TermUtil; use Boilerplate\Util\UserUtil; use Optimization\Util\FileUtil; use Optimization\Util\FormatUtil; use Optimization\Util\I18NUtil; use Optimization\Util\Util; use Exception; use FilesystemIterator; use IteratorIterator; use RegexIterator; use WP_Post; use WP_Taxonomy; use WP_Term; use WP_Upgrader; abstract class Purge extends Common { protected ?string $id = null; protected $paths; public function addActions() : self { $this->addAction("\163\x77\x69\x74\x63\x68\137\x74\150\145\155\145", [$this, "\x63\154\x65\141\156\104\157\x6d\x61\x69\x6e"])->addAction("\x6f\160\164\x69\x6d\x69\172\x61\164\151\157\156\137\160\165\162\x67\x65\x5f\143\141\143\150\145\137\146\151\154\145\x73", [$this, "\143\154\145\x61\156\x44\157\x6d\x61\151\156"])->addAction("\141\146\x74\x65\162\137\157\x70\x74\151\x6d\x69\172\141\164\151\157\x6e\x5f\x63\x6c\145\x61\156\x5f\x70\x6f\x73\164", [$this, "\x70\165\x72\147\145\120\157\163\164\124\145\162\155\x73\x55\x72\x6c\163"])->addAction("\157\160\164\x69\155\151\x7a\x61\164\151\x6f\x6e\137{$this->getId()}\137\x63\154\x65\141\156\x5f\144\x6f\x6d\141\151\156", [$this, "\143\x6c\145\141\156\104\157\x6d\x61\151\x6e"])->addAction("\143\157\x6d\x6d\x65\x6e\164\137\160\x6f\163\x74", [$this, "\143\x6c\145\141\156\x50\157\163\164\x4f\156\120\157\x73\x74\x43\157\155\155\x65\x6e\164"], 2, 99)->addAction("\x70\162\x65\137\160\x6f\163\164\137\x75\x70\144\x61\164\x65", [$this, "\143\x6c\x65\x61\x6e\x50\157\163\164\103\x61\143\x68\145\117\x6e\123\x74\x61\x74\165\x73\103\x68\141\156\147\145"], 2)->addAction("\165\x70\x67\162\x61\x64\145\x72\x5f\160\x72\x6f\x63\x65\163\163\x5f\x63\x6f\x6d\160\154\145\x74\x65", [$this, "\160\x75\162\x67\145\x4f\156\x54\x68\x65\155\x65\x55\160\144\x61\x74\145"], 2); return parent::addActions(); } public function addFilters() : self { goto Uz0mI; H1Y28: return parent::addFilters(); goto U_drR; kXNLK: $BEHRo = TaxonomyUtil::getList(["\160\165\142\x6c\151\x63" => true, "\160\x75\142\154\151\x63\x6c\x79\137\161\165\145\162\x79\x61\142\154\145" => true], TaxonomyUtil::NAMES); goto u9hS0; jgUm3: if (!(!AjaxUtil::isAjax() && is_admin())) { goto mp4kH; } goto kXNLK; Uz0mI: $this->addFilter("\x6f\x70\164\x69\x6d\151\x7a\x61\x74\151\x6f\156\137\x63\x6c\x65\141\156\x5f\x66\151\154\x65\x73", [$this, "\x63\154\145\x61\156\106\x69\154\145\x73\x55\x73\145\162\x73"]); goto jgUm3; fR79i: mp4kH: goto H1Y28; SzBLV: YJqFW: goto fR79i; u9hS0: foreach ($BEHRo as $jkW51) { $this->addFilter("{$jkW51}\137\x72\x6f\x77\137\141\x63\x74\x69\157\156\163", [$this, "\141\x64\144\120\165\x72\147\x65\124\145\162\155\x4c\x69\x6e\x6b"], 2); OOYef: } goto SzBLV; U_drR: } public function cleanPostOnPostComment($yLzE8, $bAQ5Q) { goto QiJyB; Xo5MK: $this->cleanPost(PostUtil::getId($XIX7X)); goto XAFSD; QiJyB: $XIX7X = CommentUtil::getPost($yLzE8); goto OyAzh; OyAzh: if (!$XIX7X) { goto gCr_I; } goto Xo5MK; XAFSD: gCr_I: goto WrDZL; WrDZL: } public function getId() : string { return $this->id; } public function getPaths() : array { goto mH_Bo; mH_Bo: $Lwbqq = $this->paths; goto br12d; br12d: if (!is_string($Lwbqq)) { goto jPCJp; } goto T50ib; T50ib: $Lwbqq = [$Lwbqq]; goto dQRaD; dQRaD: jPCJp: goto rVB0T; rVB0T: return $Lwbqq; goto D3eld; D3eld: } public function cleanPostCacheOnStatusChange($u2ese, $vwB7A) { goto KEK2u; Mk3jp: if (!($XIX7X && "\160\165\x62\x6c\x69\x73\x68" === PostUtil::getField("\x70\x6f\163\164\137\x73\x74\x61\x74\165\x73", $XIX7X))) { goto BTSFL; } goto bNedW; N89rJ: $this->doAction("\x61\x66\x74\145\162\137\x6f\x70\164\151\155\151\x7a\x61\x74\x69\157\156\x5f\143\x6c\145\141\x6e\x5f\x70\x6f\x73\x74", $XIX7X, $bPP0q, $Onk5O); goto ugHsb; UNcjD: $this->cleanFiles($bPP0q); goto O9_SJ; DWBWx: $this->cleanHomeFeeds(); goto N89rJ; KEK2u: $XIX7X = PostUtil::get($u2ese); goto Mk3jp; gKzQP: $bPP0q = (array) $this->applyFilters("\x6f\x70\x74\151\x6d\x69\x7a\x61\x74\x69\x6f\156\x5f\x70\157\163\164\137\x70\165\x72\147\145\137\165\x72\x6c\x73", $bPP0q, $XIX7X); goto C6M78; bNedW: $Onk5O = I18NUtil::getLang($u2ese); goto TIIss; O9_SJ: $this->cleanHome($Onk5O); goto DWBWx; TnJ7F: BTSFL: goto At3PH; C6M78: $this->doAction("\142\145\x66\x6f\162\x65\137\157\x70\x74\151\x6d\x69\x7a\x61\164\151\157\156\137\x63\x6c\145\x61\x6e\x5f\160\157\x73\164", $XIX7X, $bPP0q, $Onk5O); goto UNcjD; ugHsb: $this->doAction("{$this->getId()}\137\x61\x66\x74\x65\x72\137\157\x70\164\151\x6d\151\x7a\x61\164\151\x6f\x6e\x5f\143\154\145\x61\156\137\160\157\163\x74", $XIX7X, $bPP0q, $Onk5O); goto TnJ7F; TIIss: $bPP0q = $this->getPurgeUrls($u2ese, $XIX7X); goto gKzQP; At3PH: } public function cleanFilesUsers($BWnT3) { goto ej2ZG; LxaQP: wiM8S: goto Spdu9; Spdu9: return $ud6fw; goto uNNZc; D1757: foreach ($BWnT3 as $hgTz4) { goto YSn3H; YSn3H: $NFJp4 = FormatUtil::getParseUrl($hgTz4); goto k0aZe; n_GPh: twDqL: goto N7eMP; k0aZe: $ud6fw[] = $NFJp4["\163\x63\x68\145\x6d\x65"] . "\x3a\57\57" . $NFJp4["\150\x6f\x73\164"] . "\52" . $NFJp4["\x70\141\164\x68"]; goto n_GPh; N7eMP: } goto LxaQP; ej2ZG: $ud6fw = []; goto D1757; uNNZc: } public function purgeOnThemeUpdate($d3OaO, $vJ8FL) { goto eDmsq; q2WPP: WwVAP: goto nV1VQ; jdXw2: if (!array_intersect($vJ8FL["\164\150\145\x6d\x65\x73"], $VLSMF)) { goto dXqbs; } goto N5oBO; eDmsq: if (!("\165\160\144\141\164\x65" === $vJ8FL["\x61\143\164\x69\x6f\x6e"])) { goto pVDXI; } goto qT89y; SiDUa: $qSlqr = wp_get_theme(); goto Yj16f; nV1VQ: I06vX: goto WI3i3; N5oBO: $this->cleanDomain(); goto fnYIW; qT89y: if (!("\x74\x68\145\x6d\x65" === $vJ8FL["\164\171\x70\x65"])) { goto I06vX; } goto yNjU8; Yj16f: $VLSMF = [$qSlqr->get_template(), $qSlqr->get_stylesheet()]; goto jdXw2; WI3i3: pVDXI: goto PZe95; fnYIW: dXqbs: goto q2WPP; yNjU8: if (!is_array($vJ8FL["\164\x68\x65\x6d\x65\x73"])) { goto WwVAP; } goto SiDUa; PZe95: } public function maybePurgeCacheOnTermChange($uFNn1, $AI2tI, $jkW51) { goto VHYyC; VHYyC: if (!TaxonomyUtil::isPublic($jkW51)) { goto wNP0b; } goto jys6m; jys6m: $this->cleanDomain(); goto Y1Whs; Y1Whs: wNP0b: goto Lcsn3; Lcsn3: } private function maybeRemoveDirectory($lzD2z) { goto hRc6z; eyTR4: mSTCt: goto wbA8r; fJi3u: FileUtil::rrmdir($lzD2z); goto eyTR4; hRc6z: if (!$this->getFilesystem()->isDirectory($lzD2z)) { goto mSTCt; } goto fJi3u; wbA8r: } private function purgeUrl(string $hgTz4, $HqUIe = false) { goto jkD4_; jkD4_: global $CvGON; goto MjYVy; xUWQj: foreach ($this->getCacheDirectories($gJJsP["\150\157\x73\164"]) as $lzD2z) { goto AtlNA; ItNF6: $this->maybeRemoveDirectory(trailingslashit($GuTuU) . $CvGON->pagination_base); goto bmw8_; yOhAI: if (!$HqUIe) { goto NbKYs; } goto ItNF6; jV12_: DTioX: goto yOhAI; mxkCH: Ml9kC: goto CEUv4; bmw8_: NbKYs: goto EMRu1; pRzxH: foreach (FileUtil::getIterator($GuTuU) as $kJMVe) { goto bx0vZ; bx0vZ: if (!$kJMVe->isFile()) { goto kCafU; } goto cnSwB; cnSwB: $this->getFilesystem()->remove($kJMVe->getPathname()); goto u32fz; u32fz: kCafU: goto Uz2Vr; Uz2Vr: sPiuV: goto DzS28; DzS28: } goto jV12_; AtlNA: $GuTuU = $lzD2z . $gJJsP["\160\x61\x74\x68"]; goto UAMpa; EMRu1: keeEI: goto mxkCH; UAMpa: if (!$this->getFilesystem()->exists($GuTuU)) { goto keeEI; } goto pRzxH; CEUv4: } goto vMMw2; vMMw2: DmQ3D: goto i2Mdx; MjYVy: $gJJsP = $this->parseUrl($hgTz4); goto xUWQj; i2Mdx: } public function getCacheDirectories($sIP9w, $GuTuU = '', $zzgax = false) { goto Wm3XD; d8iKj: goto kstzk; goto sdJDJ; ZD0cZ: if (isset($nS1YM[$sIP9w])) { goto xrCnC; } goto mNBS5; mNBS5: $nS1YM[$sIP9w] = []; goto E5FXA; VTCnj: return $nS1YM[$sIP9w]; goto LYyhZ; YvmcU: $Lwbqq = $GuTuU; goto d8iKj; Wm3XD: if (!$GuTuU) { goto ANA_I; } goto aSudB; aSudB: if (!is_array($GuTuU)) { goto UeIUo; } goto YvmcU; l2_a2: $Lwbqq = [$GuTuU]; goto hxVzE; Sxg6I: xrCnC: goto VTCnj; DYSn2: UeIUo: goto l2_a2; sdJDJ: ANA_I: goto qlb3S; E5FXA: foreach ($Lwbqq as $GuTuU) { goto Jdhf7; kIQXh: $NeAew = sprintf("\57\x25\x31\44\163\45\x32\44\x73\x28\56\52\x29\57\151", FileUtil::normalizePath($GuTuU, true), $sIP9w); goto T4X8S; T4X8S: try { goto Gcwos; f_U8k: uGn0p: goto polez; Gcwos: $ahdVm = new RegexIterator($T1d9t, $NeAew); goto boQ_s; boQ_s: foreach ($ahdVm as $yH61N) { $nS1YM[$sIP9w][] = $yH61N->getPathname(); SDYul: } goto f_U8k; polez: } catch (Exception $XIaY1) { $nS1YM[$sIP9w] = []; } goto G23Lm; G23Lm: Rn1Kw: goto T7xcJ; txRD0: try { $T1d9t = new IteratorIterator(new FilesystemIterator($GuTuU)); } catch (Exception $XIaY1) { return []; } goto kIQXh; Jdhf7: $GuTuU = trailingslashit($GuTuU); goto txRD0; T7xcJ: } goto K2AE3; hxVzE: kstzk: goto ZD0cZ; kilm3: goto kstzk; goto DYSn2; qlb3S: $Lwbqq = $this->getPaths(); goto kilm3; K2AE3: PhpsX: goto Sxg6I; LYyhZ: } public function purgePostTermsUrls(WP_Post $XIX7X) { foreach ($this->getPostTermsUrls($XIX7X) as $hgTz4) { $this->purgeUrl($hgTz4); At27t: } dXz4F: } public function addPurgeTermLink($HUGaN, $qaCDz) { goto Z6Doo; Z6Doo: if (!UserUtil::currentCan("\x6d\x61\x6e\141\147\x65\137\x6f\x70\164\x69\x6f\x6e\163")) { goto S7hUl; } goto uEr3i; e_gC4: return $HUGaN; goto x9DTg; RQE0A: S7hUl: goto e_gC4; DkguS: $HUGaN["\x6f\160\164\151\x6d\x69\172\141\x74\x69\x6f\156\137\160\165\x72\147\145\137{$this->getId()}"] = sprintf("\x3c\x61\40\x68\x72\x65\146\75\42\x25\x31\44\x73\x22\x3e\x25\62\x24\x73\74\x2f\141\x3e", $hgTz4, sprintf(__("\x43\x6c\x65\x61\x72\40\x74\x68\x69\x73\40\45\163", OPTIMIZATION_DOMAIN), $this->getId())); goto RQE0A; uEr3i: $hgTz4 = wp_nonce_url(admin_url("\x61\x64\x6d\x69\x6e\55\160\x6f\163\x74\56\160\150\x70\x3f\x61\x63\164\151\157\x6e\x3d\x6f\160\x74\151\x6d\x69\172\141\164\151\x6f\156\137\x70\165\162\147\x65\x5f{$this->getId()}\x26\164\171\160\x65\75\x74\145\162\155\55{$qaCDz->term_id}\x26\164\x61\x78\x6f\156\x6f\x6d\171\75{$qaCDz->taxonomy}"), "\x6f\x70\x74\151\x6d\x69\x7a\x61\x74\151\157\156\x5f\160\165\162\x67\x65\137{$this->getId()}\x5f\164\145\162\x6d\x2d{$qaCDz->term_id}"); goto DkguS; x9DTg: } private function parseUrl(string $hgTz4) { goto L5oOX; kuBLI: return $gJJsP; goto etjh4; L5oOX: $gJJsP = FormatUtil::getParseUrl($hgTz4); goto CnItf; CnItf: if (!isset($gJJsP["\x68\157\x73\164"])) { goto DfI_q; } goto OCwxA; nYjgf: DfI_q: goto kuBLI; OCwxA: $gJJsP["\150\157\x73\164"] = FormatUtil::maybeUrlNoDots($gJJsP["\150\x6f\x74\163"]); goto nYjgf; etjh4: } private function getDatesArchives($XIX7X) { goto ZlWO3; EPebT: return $BWnT3; goto S07nk; XNLkQ: $BWnT3 = [get_year_link($SHoO9[0]), get_month_link($SHoO9[0], $SHoO9[1]), get_day_link($SHoO9[0], $SHoO9[1], $SHoO9[2])]; goto oZym1; Lv2VP: K7WOi: goto EPebT; ewFLQ: $SHoO9 = explode("\x2d", $QEgui); goto XNLkQ; ZlWO3: $QEgui = get_the_time("\131\55\x6d\x2d\x64", $XIX7X); goto Ne6_q; wRGvC: if (!$QEgui) { goto K7WOi; } goto ewFLQ; Ne6_q: $BWnT3 = []; goto wRGvC; oZym1: $BWnT3 = (array) $this->applyFilters("\x6f\160\x74\151\155\151\x7a\x61\x74\x69\x6f\x6e\x5f\160\x6f\163\164\137\144\x61\164\145\x73\137\x75\162\x6c\163", $BWnT3); goto Lv2VP; S07nk: } public function purgeDatesArchives($XIX7X) { foreach ($this->getDatesArchives($XIX7X) as $hgTz4) { $this->purgeUrl($hgTz4, true); q4BV6: } Vov_V: } private function getPostTermsUrls(WP_Post $XIX7X) { goto rTIGh; O9BiO: $BEHRo = PostUtil::getTaxonomiesObject($XIX7X, PostUtil::OBJECT); goto S_YEA; rTIGh: $BWnT3 = []; goto O9BiO; S_YEA: foreach ($BEHRo as $jkW51) { goto VpRsX; sVoCe: $jkW51 = TaxonomyUtil::getName($jkW51); goto A7Z4X; ahrIJ: foreach ($xIOIC as $qaCDz) { goto ryoYy; ryoYy: $fnl_W = TermUtil::getLink($qaCDz, $jkW51); goto lUSG4; ojBwQ: $BWnT3[] = $fnl_W; goto jbHvi; QqdQ9: eP2PR: goto HrmML; lUSG4: if (!$fnl_W) { goto mCGHk; } goto ojBwQ; jbHvi: mCGHk: goto WFOZL; xfjaG: foreach ($fF4B9 as $DMCj3) { goto lNZhb; yzzH3: if (!$U2aaP) { goto K8BxW; } goto OODwm; OODwm: $BWnT3[] = $U2aaP; goto nZfma; jDfuX: k79tG: goto UZU3W; lNZhb: $VuR6L = TermUtil::get($DMCj3, $jkW51); goto hQuz5; pCVbO: Kqf_W: goto jDfuX; Go69P: $U2aaP = TermUtil::getLink($VuR6L, $jkW51); goto yzzH3; nZfma: K8BxW: goto pCVbO; hQuz5: if (!$VuR6L) { goto Kqf_W; } goto Go69P; UZU3W: } goto DPedX; NuJfs: $fF4B9 = (array) get_ancestors(TermUtil::getId($qaCDz), $jkW51); goto xfjaG; WFOZL: if (!TaxonomyUtil::isHierarchical($jkW51)) { goto eP2PR; } goto NuJfs; DPedX: vbk_C: goto QqdQ9; HrmML: XDvxp: goto x73ck; x73ck: } goto qYcA8; VpRsX: if (!($jkW51 instanceof WP_Taxonomy && $jkW51->public && "\160\162\157\x64\x75\143\164\x5f\163\x68\x69\x70\160\151\156\x67\137\x63\154\x61\163\x73" === $jkW51->name)) { goto ck6sh; } goto sVoCe; sxphG: pxsKM: goto wNDK4; A7Z4X: $xIOIC = PostUtil::getTerms($XIX7X, $jkW51); goto F46fO; eUuqO: r12UB: goto ALGk8; qYcA8: QkjwU: goto sxphG; wNDK4: ck6sh: goto eUuqO; F46fO: if (!$xIOIC) { goto pxsKM; } goto ahrIJ; ALGk8: } goto rVybd; rVybd: UPpb5: goto Go7Nr; Go7Nr: return $this->applyFilters("\x6f\x70\164\x69\155\151\x7a\x61\164\151\157\x6e\137\x70\x6f\x73\x74\137\x74\x65\x72\155\163\137\x75\162\x6c\163", $BWnT3); goto L5shX; L5shX: } public function cleanDomain($Onk5O = '') { goto h8C8A; nnAHU: if (!($BWnT3 && $Lwbqq)) { goto sLxCA; } goto zzf6a; DFb64: $BWnT3 = (array) $this->applyFilters("\x6f\160\164\151\155\x69\x7a\141\164\x69\157\156\137\x63\x6c\x65\141\x6e\137\x64\x6f\x6d\141\151\156\x5f\165\x72\x6c\x73", $BWnT3, $Onk5O); goto ZVeWf; ZVeWf: $BWnT3 = array_filter($BWnT3); goto V3LiO; Pme4c: sLxCA: goto OfawK; zzf6a: foreach ($Lwbqq as $GuTuU) { goto oouVs; oouVs: $gFaTf = I18NUtil::getDirectoriesToPreserve($Onk5O, $GuTuU); goto omPGk; omPGk: foreach ($BWnT3 as $hgTz4) { goto zg5Il; zyRUI: $this->doAction("\142\x65\x66\x6f\x72\145\137\157\160\164\x69\155\151\x7a\141\x74\151\x6f\156\x5f\143\x6c\x65\141\x6e\137\x64\x6f\155\141\x69\x6e", $tQVlb, $Onk5O, $hgTz4); goto XgtiS; zg5Il: $gJJsP = FormatUtil::getParseUrl($hgTz4); goto UIk3e; Hp4C3: $tQVlb = $GuTuU . $gJJsP["\x68\157\163\164"] . $gJJsP["\160\x61\164\x68"]; goto zyRUI; EBA_k: zdiii: goto Hp4C3; XgtiS: foreach ($this->getCacheDirectories($gJJsP["\150\157\163\164"], $GuTuU) as $lzD2z) { goto Fwh_Y; kYkdc: if (!$yb0zb->exists($yH61N)) { goto a_fnX; } goto unOyC; gzDs0: cztI6: goto tidHn; II2jB: a_fnX: goto gzDs0; unOyC: if ($yb0zb->isDirectory($yH61N)) { goto KSNqr; } goto fruRv; bVYkh: KSNqr: goto MrGiU; PSYEU: $yb0zb = $this->getFilesystem(); goto kYkdc; v4Fl3: goto dCWrO; goto bVYkh; MrGiU: FileUtil::rrmdir($yH61N, $gFaTf, $yb0zb); goto Dm31C; Fwh_Y: $yH61N = $lzD2z . $gJJsP["\160\x61\164\150"]; goto PSYEU; fruRv: $yb0zb->remove($yH61N); goto v4Fl3; Dm31C: dCWrO: goto II2jB; tidHn: } goto b54FJ; fRZ_c: $gJJsP["\150\157\163\164"] = FormatUtil::maybeUrlNoDots($gJJsP["\150\x6f\163\164"]); goto EBA_k; z_YxY: $this->doAction("\141\146\x74\145\162\x5f\x6f\160\x74\151\155\151\x7a\141\x74\151\157\x6e\137\143\x6c\x65\x61\x6e\x5f\144\157\x6d\x61\x69\156", $tQVlb, $Onk5O, $hgTz4); goto oT66M; oT66M: cic9G: goto BrdFe; UIk3e: if (!isset($gJJsP["\x68\157\163\x74"])) { goto zdiii; } goto fRZ_c; b54FJ: Jk7OI: goto z_YxY; BrdFe: } goto XtSU1; TPQg6: UW0Nt: goto RdiVU; XtSU1: Jvtcn: goto TPQg6; RdiVU: } goto wwK5k; h8C8A: $BWnT3 = !$Onk5O || is_object($Onk5O) || is_array($Onk5O) || is_int($Onk5O) ? (array) I18NUtil::getUri() : (array) I18NUtil::getHomeUrlByLang($Onk5O); goto DFb64; V3LiO: $Lwbqq = $this->getPaths(); goto nnAHU; wwK5k: Ybg6K: goto Pme4c; OfawK: } public function getPurgeUrls($Q6Bxn, $XIX7X) { goto iGDVU; PKA9k: $BWnT3[] = $g4jCN; goto k4JAq; j20f1: $g4jCN = PostUtil::getTypeArchiveLink($P43Sp); goto gx2mP; h_c1r: $BWnT3[] = $fnl_W; goto kSxhB; iPqzA: restore_current_blog(); goto pnMCb; rJMU5: jS818: goto vI4Tb; ZMfe5: switch_to_blog($Yu1sP); goto eiLop; m4Z71: if1M4: goto iw6i8; cP5r6: if (!(FormatUtil::extractUrlComponent($fnl_W, PHP_URL_PATH) !== "\57")) { goto hweZe; } goto h_c1r; eiLop: $ERaDD = CommonUtil::getOption("\x68\157\x6d\145"); goto iPqzA; bTJBC: $a9mAM = Util::getSamplePermalink($Q6Bxn); goto L386j; xJz5C: $Lwbqq = $this->getPaths(); goto pghD3; iGDVU: $BWnT3 = []; goto bTJBC; rXThg: $xIgOP = Setting::getSetting("\143\141\x63\x68\x65\x5f\x70\x75\x72\x67\x65\x5f\160\141\147\x65\x73"); goto uRJ5K; GcvRx: if (!(bool) $X17Cd) { goto jS818; } goto HkiNG; rgaCt: $ERaDD = CommonUtil::getOption("\x68\157\x6d\x65"); goto gsPAh; iw6i8: xSD0f: goto s1MCX; qPO0l: $X17Cd = get_post_ancestors($Q6Bxn); goto GcvRx; pghD3: foreach ($Lwbqq as $GuTuU) { goto scTnP; scTnP: $GuTuU .= $umFiA["\150\x6f\x73\x74"]; goto TdMH6; P3155: A4_me: goto judD8; P3N1O: cKyST: goto P3155; TdMH6: foreach ($xIgOP as $xC4VR) { goto crm9D; ar8g_: kN_q0: goto bVqb7; fHgo8: goto CKCeU; goto ar8g_; crm9D: if (!strstr($xC4VR, "\52")) { goto kN_q0; } goto Uzg4m; bVqb7: $BWnT3[] = trailingslashit($ERaDD) . $xC4VR; goto nWMMW; KragE: ZdeWs: goto fHgo8; nWMMW: CKCeU: goto xJIg6; Uzg4m: $upoja = FileUtil::getRecursiveDirFilesByRegex($GuTuU, "\x23" . $xC4VR . "\x23\x69"); goto h63ln; h63ln: foreach ($upoja as $wpkb5) { $BWnT3[] = str_replace($GuTuU, untrailingslashit($ERaDD), $wpkb5->getPath()); SbnLN: } goto KragE; xJIg6: } goto P3N1O; judD8: } goto m4Z71; k4JAq: $BWnT3[] = $g4jCN . "{$GLOBALS["\x77\160\x5f\x72\145\x77\162\x69\x74\x65"]->pagination_base}"; goto oVxou; C3xWm: $umFiA = FormatUtil::getParseUrl($ERaDD); goto CA6yG; HkiNG: foreach ($X17Cd as $X4T7F) { $BWnT3[] = PostUtil::getPermalink($X4T7F); kTQJ5: } goto n6tG5; oVxou: BqfsX: goto rXThg; JP4UH: $P43Sp = PostUtil::getType($XIX7X); goto j20f1; s1MCX: $BWnT3[] = PostUtil::getAuthorUrl($XIX7X); goto qPO0l; CA6yG: $ERaDD = "{$umFiA["\163\143\150\145\x6d\145"]}\x3a\x2f\57{$umFiA["\150\157\x73\164"]}"; goto xJz5C; gx2mP: if (!$g4jCN) { goto BqfsX; } goto PKA9k; pnMCb: ebHOE: goto C3xWm; vI4Tb: return array_flip(array_flip($BWnT3)); goto ZjGcr; L386j: $fnl_W = str_replace(["\x25\x70\157\163\x74\156\141\155\145\45", "\x25\160\141\x67\x65\156\141\x6d\x65\x25"], $a9mAM[1], $a9mAM[0]); goto cP5r6; uRJ5K: if (!$xIgOP) { goto xSD0f; } goto onjY8; n6tG5: zKXZd: goto rJMU5; kSxhB: hweZe: goto JP4UH; gsPAh: if (!(!empty($Yu1sP) && is_multisite())) { goto ebHOE; } goto ZMfe5; onjY8: global $Yu1sP; goto rgaCt; ZjGcr: } public function cleanPost(?string $u2ese) { goto Y3AHp; zdA26: $P43Sp = PostUtil::getType($XIX7X); goto P9PeF; PX_Ys: if (defined("\x44\x4f\111\116\x47\137\101\x55\x54\117\123\x41\x56\x45")) { goto EtQB1; } goto dqs_2; GaEso: goto x2GaY; goto fFmpg; x5Ss2: if ("\160\x6f\154\171\154\x61\156\x67" === $m8MCa && function_exists("\160\154\x6c\x5f\147\x65\164\x5f\160\x6f\163\164\137\x6c\141\x6e\147\165\x61\147\x65")) { goto T981q; } goto mG42Q; Bc36p: if (!PostUtil::isTypePublic($P43Sp)) { goto sMeF2; } goto KgCS9; K4igy: $Onk5O = false; goto Zs0h_; prKTe: $this->doAction("\x61\x66\x74\145\x72\137\157\x70\164\151\x6d\151\172\141\x74\x69\157\x6e\x5f\143\x6c\145\141\156\x5f\160\157\x73\164", $XIX7X, $bPP0q, $Onk5O); goto l8G3M; fFmpg: T981q: goto k9zoh; mG42Q: goto x2GaY; goto FjYh0; dqs_2: $XIX7X = PostUtil::get($u2ese); goto zdA26; k1SRt: $Onk5O = $GLOBALS["\163\x69\164\145\160\162\x65\163\x73"]->get_language_for_element($u2ese, "\160\157\x73\164\137" . $P43Sp); goto GaEso; M0j5p: $bPP0q = $this->applyFilters("\157\x70\x74\151\155\x69\x7a\141\164\151\157\x6e\x5f\160\157\x73\x74\137\160\165\x72\x67\x65\137\x75\162\154\x73", $bPP0q, $XIX7X); goto T2cs9; f5LqR: HTiFX: goto pxGO1; Zs0h_: if ("\167\160\155\154" === $m8MCa && !PluginUtil::isActive("\x77\157\157\x63\157\x6d\155\145\162\143\145\55\155\165\x6c\164\x69\154\x69\x6e\147\x75\141\x6c\x2f\x77\160\x6d\154\x2d\167\x6f\157\x63\x6f\x6d\155\x65\x72\143\x65\x2e\160\150\160")) { goto s4eOY; } goto x5Ss2; l0Mxk: $this->doAction("\142\x65\x66\157\162\x65\x5f\157\x70\x74\x69\155\x69\x7a\x61\164\151\157\x6e\137\x63\x6c\x65\141\156\x5f\160\x6f\163\164", $XIX7X, $bPP0q, $Onk5O); goto M0j5p; y_dZV: pXUk0: goto uKHd4; o6pQ5: $this->cleanHomeFeeds(); goto prKTe; KgCS9: $m8MCa = I18NUtil::has(); goto K4igy; T2cs9: $this->cleanFiles($bPP0q); goto AY50A; P9PeF: if (!($XIX7X && $P43Sp && !in_array($P43Sp, ["\x61\164\x74\141\x63\150\x6d\145\x6e\x74", "\156\141\x76\x5f\x6d\x65\156\165\x5f\151\164\x65\155"]) && !in_array($XIX7X->post_status, ["\x64\x72\141\x66\164", "\141\165\164\x6f\55\144\x72\141\146\164"]))) { goto HTiFX; } goto Bc36p; f2tw5: x2GaY: goto MIR20; pxGO1: EtQB1: goto y_dZV; vycVx: $poC8P[$u2ese] = 1; goto PX_Ys; X2Doc: if (isset($poC8P[$u2ese])) { goto pXUk0; } goto vycVx; l8G3M: sMeF2: goto f5LqR; MIR20: $bPP0q = $this->getPurgeUrls($u2ese, $XIX7X); goto l0Mxk; AY50A: $this->cleanHome($Onk5O); goto o6pQ5; Y3AHp: static $poC8P = []; goto X2Doc; FjYh0: s4eOY: goto k1SRt; k9zoh: $Onk5O = pll_get_post_language($u2ese); goto f2tw5; uKHd4: } public function cleanFiles($BWnT3) { goto bvKQB; bvKQB: $BWnT3 = array_filter((array) $BWnT3); goto XULgT; XULgT: if (!$BWnT3) { goto Mj72P; } goto gd07Y; gd07Y: $Lwbqq = $this->getPaths(); goto FTyNJ; OUZHO: Mj72P: goto BZxI7; zE83D: gZ8B2: goto BGq6Z; FTyNJ: $yb0zb = $this->getFilesystem(); goto aCi75; aJGfV: foreach ($BWnT3 as $hgTz4) { goto rp60n; vDkil: $gJJsP = FormatUtil::getParseUrl($hgTz4); goto FdIj9; QNMtQ: ww0bT: goto reUro; Ntyu5: UA7UM: goto BjvmL; rp60n: $this->doAction("\x62\145\146\x6f\162\145\137\x6f\160\x74\151\155\151\172\141\x74\151\157\x6e\x5f\143\154\145\x61\x6e\x5f\x66\x69\154\x65", $hgTz4); goto DOqCH; DOqCH: $hgTz4 = FormatUtil::maybeUrlNoDots($hgTz4); goto vDkil; FdIj9: foreach ($Lwbqq as $GuTuU) { goto zi9ln; zi9ln: foreach ($this->getCacheDirectories($gJJsP["\150\x6f\x73\164"], $GuTuU) as $lzD2z) { goto rJJ4O; wF2R8: S7f9H: goto BxJWn; m5NS4: $yb0zb->remove($yH61N); goto wF2R8; rJJ4O: $yH61N = $lzD2z . $gJJsP["\160\141\x74\150"]; goto tiwuR; BxJWn: BVbGw: goto rRtvU; tiwuR: if (!$yb0zb->exists($yH61N)) { goto S7f9H; } goto m5NS4; rRtvU: } goto WnJ0I; WnJ0I: wKeCr: goto LPsJx; LPsJx: AsMST: goto o7ApR; o7ApR: } goto QNMtQ; reUro: $this->doAction("\x61\146\164\x65\162\137\x6f\x70\164\x69\x6d\151\172\x61\164\151\157\x6e\x5f\143\154\145\x61\156\137\146\151\x6c\145", $hgTz4); goto Ntyu5; BjvmL: } goto zE83D; aCi75: $this->doAction("\142\145\146\x6f\162\145\137\157\x70\164\151\155\151\172\x61\164\151\x6f\x6e\x5f\x63\154\145\141\156\137\146\151\x6c\145\163", $BWnT3); goto aJGfV; BGq6Z: $this->doAction("\x61\x66\x74\145\x72\137\157\x70\x74\x69\x6d\x69\x7a\x61\x74\x69\x6f\x6e\x5f\143\x6c\x65\x61\156\x5f\146\x69\154\145\163", $BWnT3); goto OUZHO; BZxI7: } public function cleanHome($Onk5O = '') { goto To2YQ; EiLx4: foreach ($Lwbqq as $GuTuU) { goto JkYb7; YSGUx: foreach ($PxU3F as $LgnRt) { $this->getFilesystem()->remove($LgnRt); urDSv: } goto WCYTM; WCYTM: ElKAH: goto ThmXq; ZKVdf: $this->doAction("\141\146\164\145\162\x5f\157\160\164\x69\155\x69\x7a\141\x74\151\157\x6e\137\143\154\x65\141\156\x5f\x68\x6f\155\x65", $tQVlb, $Onk5O); goto YtQXi; K_MHO: $tQVlb = $this->applyFilters("\157\160\164\x69\x6d\x69\172\141\164\151\x6f\156\137\143\x6c\145\141\156\137\x68\157\155\x65\137\x72\x6f\x6f\x74", $tQVlb, $NFJp4["\150\157\163\x74"], $NFJp4["\x70\141\164\150"]); goto Af2RV; DCGNf: if (!$KWSCi) { goto b9Z80; } goto n1gWF; Rm1SM: foreach ($TpWug as $HIl3a) { $this->getFilesystem()->remove($HIl3a); sabc5: } goto jspI6; Gay5v: if (!$TpWug) { goto hwcD2; } goto Rm1SM; hVeVJ: $PxU3F = glob($tQVlb . "\57\56\156\157\x2d\x77\x65\x62\160", GLOB_BRACE | GLOB_NOSORT); goto cSXWD; S99g6: foreach ($fTqn_ as $lzD2z) { FileUtil::rrmdir($lzD2z); faNM7: } goto ic5Mm; JkYb7: $tQVlb = $GuTuU . $NFJp4["\x68\157\163\x74"] . "\x2a" . untrailingslashit($NFJp4["\160\141\164\x68"]); goto K_MHO; ThmXq: aoOxQ: goto ZKVdf; Af2RV: $this->doAction("\x62\x65\x66\157\162\145\137\x6f\x70\x74\151\155\x69\x7a\x61\164\x69\157\x6e\x5f\x63\x6c\145\x61\156\137\x68\x6f\x6d\x65", $tQVlb, $Onk5O); goto mLvTZ; VtjK4: b9Z80: goto NdYtD; Y7ucl: $TpWug = glob($tQVlb . "\x2f\56\155\x6f\142\151\154\x65\55\x61\x63\164\151\166\145", GLOB_BRACE | GLOB_NOSORT); goto Gay5v; NdYtD: $fTqn_ = glob($tQVlb . "\x2a\x2f" . $GLOBALS["\167\160\137\x72\145\x77\x72\151\x74\x65"]->pagination_base, GLOB_NOSORT); goto UrNNm; ArEvs: hwcD2: goto hVeVJ; mJbNW: x3odj: goto Y7ucl; mLvTZ: $KWSCi = glob($tQVlb . "\x2f\x7b\x69\156\x64\x65\170\54\x69\156\144\x65\x78\55\x2a\175\56\x7b\150\x74\x6d\154\x2c\150\x74\155\x6c\137\x67\x7a\x69\160\x7d", GLOB_BRACE | GLOB_NOSORT); goto DCGNf; ntNeF: rcIaP: goto VtjK4; UrNNm: if (!$fTqn_) { goto x3odj; } goto S99g6; YtQXi: Vyi1P: goto zpnJY; jspI6: Yh9Nq: goto ArEvs; cSXWD: if (!$PxU3F) { goto aoOxQ; } goto YSGUx; ic5Mm: N29Ng: goto mJbNW; n1gWF: foreach ($KWSCi as $wpkb5) { $this->getFilesystem()->remove($wpkb5); HlDyw: } goto ntNeF; zpnJY: } goto JrO3K; To2YQ: $NFJp4 = FormatUtil::getParseUrl(I18NUtil::getHomeUrlByLang($Onk5O)); goto s9AtN; eWU30: $Lwbqq = $this->getPaths(); goto EiLx4; JrO3K: Nxca2: goto fX22R; mJafC: $NFJp4["\x68\x6f\163\164"] = FormatUtil::maybeUrlNoDots($NFJp4["\150\x6f\163\164"]); goto rZI43; s9AtN: if (!isset($NFJp4["\x68\x6f\163\x74"])) { goto T9H2A; } goto mJafC; rZI43: T9H2A: goto eWU30; fX22R: } public function cleanHomeFeeds() { goto U39i_; U39i_: $BWnT3 = []; goto R_1Ux; R_1Ux: $BWnT3[] = get_feed_link(); goto USus6; XQviD: self::cleanFiles($BWnT3); goto LouLt; LouLt: $this->doAction("\x61\146\x74\x65\162\x5f\x6f\x70\x74\151\x6d\x69\172\x61\164\151\x6f\156\x5f\x63\154\145\x61\x6e\137\150\157\x6d\x65\x5f\x66\x65\x65\x64\163", $BWnT3); goto z_KUM; WUeoM: $BWnT3 = $this->applyFilters("\157\x70\164\x69\x6d\x69\x7a\141\164\x69\157\156\137\x63\154\x65\x61\156\137\150\x6f\155\x65\x5f\146\145\x65\x64\163", $BWnT3); goto E_TuG; E_TuG: $this->doAction("\x62\x65\x66\157\x72\x65\x5f\157\x70\x74\151\x6d\x69\172\141\x74\151\157\x6e\x5f\x63\x6c\145\x61\156\x5f\x68\x6f\155\x65\x5f\146\x65\145\x64\163", $BWnT3); goto XQviD; USus6: $BWnT3[] = get_feed_link("\143\157\x6d\x6d\x65\156\x74\x73\x5f"); goto WUeoM; z_KUM: } public function cleanTerm($uFNn1, $wvCBd) { goto gEqQj; wt5Yk: $Onk5O = pll_get_term_language($uFNn1); goto zOJPe; DiqRf: $qaCDz = TermUtil::getBy("\151\144", $uFNn1, $wvCBd); goto o7wU2; lyaog: if ("\x70\157\154\x79\154\x61\156\147" === $m8MCa) { goto uDLSK; } goto WWhXw; A1FwX: $this->cleanHome($Onk5O); goto Qr7Er; d2DXJ: $Onk5O = $GLOBALS["\x73\151\x74\x65\x70\x72\145\x73\x73"]->get_language_for_element($uFNn1, "\x74\x61\170\137" . $wvCBd); goto yF6HT; MDBet: $this->doAction("\x62\x65\x66\x6f\x72\x65\137\162\x6f\143\x6b\x65\164\x5f\x63\154\x65\141\156\137\164\145\x72\x6d", $qaCDz, $bPP0q, $Onk5O); goto ZvYSa; iiYhp: $fnl_W = TermUtil::getLink($qaCDz, $wvCBd); goto chjrY; chjrY: if (!("\57" !== FormatUtil::extractUrlComponent($fnl_W, PHP_URL_PATH))) { goto cLjyx; } goto ll435; Qr7Er: $this->doAction("\x61\146\x74\x65\162\137\x72\157\x63\x6b\145\164\137\143\x6c\145\141\x6e\x5f\164\145\162\155", $qaCDz, $bPP0q, $Onk5O); goto CKbSa; zOJPe: dwRla: goto iiYhp; kzDz5: $this->cleanFiles($bPP0q); goto A1FwX; JRK7Q: goto dwRla; goto NfoGZ; gEqQj: $bPP0q = []; goto DiqRf; WWhXw: $Onk5O = false; goto JRK7Q; DuC14: cLjyx: goto MDBet; o7wU2: $m8MCa = I18NUtil::has(); goto YdZLn; rmtOo: uDLSK: goto wt5Yk; ll435: array_push($bPP0q, $fnl_W); goto DuC14; YdZLn: if ("\x77\x70\x6d\154" === $m8MCa && !PluginUtil::isActive("\x77\x6f\x6f\143\x6f\x6d\155\145\162\x63\x65\55\x6d\x75\x6c\x74\x69\154\151\x6e\x67\x75\x61\x6c\x2f\167\x70\155\154\x2d\x77\x6f\x6f\x63\x6f\x6d\155\x65\162\x63\x65\x2e\x70\x68\160")) { goto ZH2do; } goto lyaog; ZvYSa: $bPP0q = $this->applyFilters("\x72\157\143\153\145\x74\137\164\x65\162\155\137\x70\x75\162\x67\x65\x5f\x75\162\154\x73", $bPP0q, $qaCDz); goto kzDz5; yF6HT: goto dwRla; goto rmtOo; NfoGZ: ZH2do: goto d2DXJ; CKbSa: } }
