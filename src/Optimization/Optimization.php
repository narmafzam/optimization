<?php
 namespace Optimization; use Boilerplate\Util\AjaxUtil; use Boilerplate\Util\StringUtil; use Optimization\Buffer\Config; use Optimization\Buffer\Test; use Optimization\Cache\Cache; use Optimization\CDN\CDN; use Optimization\Combine\Combine; use Optimization\Critical\Critical; use Optimization\Media\Media; use Optimization\Minify\Minify; use Optimization\Performance\Performance; use Optimization\Process\Process; use Optimization\Util\FormatUtil; use Optimization\Util\I18NUtil; use Optimization\Util\Util; class Optimization extends Common { public function __construct() { goto BTNAy; BTNAy: if (!$this->loadConstant()) { goto waxH9; } goto z5R59; z5R59: Process::getInstance(); goto cbZ0S; cbZ0S: parent::__construct(); goto CUYH6; CUYH6: waxH9: goto u661F; u661F: } public function addActions() : self { $this->addAction("\x61\x64\x6d\151\156\x5f\151\156\151\164", [$this, "\141\x64\x6d\151\x6e\111\x6e\151\x74"])->addAction("\164\145\x6d\x70\154\141\x74\145\x5f\x72\x65\144\x69\x72\x65\143\x74", [$this, "\163\x74\x61\x72\x74\x50\162\157\143\145\163\163"])->addAction("\x6d\x75\160\154\165\147\151\156\x73\x5f\154\157\x61\x64\x65\144", [$this, "\155\165\120\154\165\x67\x69\156\x73\114\157\x61\x64\x65\144"])->addAction("\141\146\x74\145\162\137\163\x65\x74\x75\x70\x5f\x74\x68\x65\x6d\x65", [$this, "\x6c\157\141\x64\122\x65\161\x75\151\x72\145\x6d\x65\x6e\164"]); return parent::addActions(); } public function startProcess() { goto TI8H8; TI8H8: if (is_admin()) { goto W2ar3; } goto DfIj6; TwXZI: W2ar3: goto iyJh9; ZPcxI: (new Buffer(new Test($config, [])))->maybeInitProcess(); goto TwXZI; DfIj6: $config = new Config(["\x70\141\x74\x68" => Util::getConstant("\117\120\124\x49\x4d\x49\x5a\x41\x54\x49\x4f\116\137\x43\x4f\x4e\x46\x49\107\x5f\x50\x41\x54\x48")]); goto ZPcxI; iyJh9: } public function loadConstant() { goto Wukaj; dLfBu: iPcpJ: goto u4m8e; J6LSt: UrQFW: goto Ng8lO; Wukaj: $return = false; goto e8rFY; H2GcH: goto MA8Yi; goto J6LSt; Ng8lO: $return = true; goto UeKm3; BndsL: $this->getFilesystem()->addRequireDir(OPTIMIZATION_CONFIG_PATH); goto dLfBu; eBWQE: define("\x4f\120\124\111\115\x49\132\x41\124\x49\117\x4e\x5f\122\117\117\124\137\104\111\x52\105\x43\x54\117\122\131", realpath(__DIR__ . "\x2f\56\56\57\56\56\x2f")); goto k5cKd; LQovN: define("\x4f\x50\124\111\115\111\x5a\x41\124\x49\117\116\x5f\104\x4f\115\x41\x49\x4e", "\157\x70\x74\151\155\x69\x7a\141\164\x69\157\x6e"); goto eBWQE; UeKm3: if (!define("\117\120\124\x49\115\x49\132\101\x54\111\117\116\137\x43\x4f\116\106\111\x47\x5f\120\x41\x54\x48", Util::getConstant("\x42\117\x49\114\x45\122\x50\x4c\x41\124\x45\x5f\126\x41\122\x5f\120\x41\124\x48") . "\x2f\143\157\x6e\x66\x69\147")) { goto iPcpJ; } goto BndsL; k5cKd: return $return; goto ibMUr; e8rFY: if (Util::hasConstant("\102\x4f\x49\x4c\105\x52\120\114\101\x54\x45\137\x56\101\122\x5f\x50\101\x54\x48")) { goto UrQFW; } goto VRS5X; VRS5X: Notice::warning(sprintf(__("\x25\163\x20\143\x6f\x6e\163\164\x61\x6e\x74\x20\x6e\x6f\164\x20\x64\145\x66\151\156\145\x64\54\x20\160\x6c\145\141\x73\145\40\x64\145\146\x69\x6e\145\40\164\150\141\x74\40\151\156\40\167\x70\55\143\x6f\156\x66\151\147\56\160\x68\160\x2e", OPTIMIZATION_DOMAIN), "\x3c\x63\x6f\x64\145\76\x57\120\137\126\101\122\x5f\x50\x41\124\x48\74\57\x63\x6f\x64\145\x3e")); goto H2GcH; u4m8e: MA8Yi: goto LQovN; ibMUr: } public function adminInit() { $this->createConfigFile(); } public function muPluginsLoaded() { $this->doAction("\x62\157\x69\x6c\x65\162\160\154\141\164\x65\x5f\x74\x77\151\147\x5f\141\144\144\x5f\160\141\164\x68", OPTIMIZATION_DOMAIN, OPTIMIZATION_ROOT_DIRECTORY)->loadTextDomain(OPTIMIZATION_DOMAIN); } public function loadRequirement() { goto nDr1K; uPcK8: goto i5sNh; goto Ji7vL; Ji7vL: YofFy: goto xq__i; r5vFM: if (!AjaxUtil::isAjax()) { goto YofFy; } goto r1Q76; xq__i: Theme::getInstance(); goto fjLvv; NfSye: Media::getInstance(); goto F5oLy; fjLvv: Minify::getInstance(); goto tU1tk; F5oLy: Cache::getInstance(); goto r5vFM; nDr1K: CDN::getInstance(); goto NfSye; J5lV2: i5sNh: goto h1L_B; tU1tk: Performance::getInstance(); goto J5lV2; r1Q76: Ajax::getInstance(); goto uPcK8; h1L_B: } public function getFiles() : array { goto KOMnq; rWqow: return $this->applyFilters("\157\x70\x74\151\x6d\151\172\x61\164\x69\157\x6e\137\143\157\156\x66\151\147\x75\162\x61\x74\x69\x6f\156\x5f\x66\x69\x6c\x65\163\x5f\160\141\x74\x68", $files); goto iBtKM; yjBMN: QNWgb: goto rWqow; qRcU7: if (!$subdomains) { goto I9nL9; } goto LojKB; KOMnq: $files = []; goto pS9Wf; Nze1b: $subdomains = I18NUtil::getSubdomains(); goto qRcU7; JqzKo: foreach ($urls as $url) { goto k0NQ7; nzxB7: $file["\x70\x61\x74\x68"] = $file["\160\x61\164\x68"] ? str_replace("\57", "\x2e", untrailingslashit($file["\160\141\164\150"])) : ''; goto LPp0O; kJkhs: OOvsO: goto YET7g; k0NQ7: $path = Util::getConstant("\117\120\124\x49\115\x49\132\101\x54\x49\117\116\137\x43\x4f\116\x46\x49\x47\x5f\120\x41\x54\x48"); goto lyO_l; lyO_l: $file = FormatUtil::getParseUrl(untrailingslashit($url)); goto dzke_; YET7g: EKhX4: goto h124Z; dzke_: if (!$path) { goto OOvsO; } goto nzxB7; S_aJL: $files[$name] = $path; goto kJkhs; LPp0O: $name = strtolower($file["\150\157\163\164"]) . $file["\x70\x61\x74\x68"] . "\x2e\160\x68\160"; goto S_aJL; h124Z: } goto yjBMN; LojKB: $urls = $subdomains; goto JAjiW; pS9Wf: $urls = [I18NUtil::getHomeUrl()]; goto Nze1b; JAjiW: I9nL9: goto JqzKo; iBtKM: } public function createConfigFile() { goto pZi83; dc3JM: if (!(is_array($files) && $files)) { goto YzoIX; } goto M95Hj; pZi83: $files = $this->getFiles(); goto fIO1U; Q8d5U: fDx_T: goto RhWTb; M95Hj: foreach ($files as $file => $path) { goto WUWRk; E1j2x: $this->getFilesystem()->mkfile($path, $file, $content); goto rzRLs; FH6sG: aAvGn: goto QY3m0; QfBKI: if ($this->getFilesystem()->mkdir($path) && $this->getFilesystem()->isReadable($path)) { goto ivkek; } goto ghUN0; ybxkz: QME5T: goto XuBQ6; QY3m0: XMel9: goto ybxkz; LnOeF: $content = preg_replace("\x40\x61\162\162\x61\171\x5c\50\x5c\163\53\x5c\x29\100\151", "\141\162\162\x61\x79\x28\x29", $content); goto E1j2x; rzRLs: Notice::info(sprintf(__("\117\x70\x74\x69\x6d\151\172\141\x74\151\157\x6e\40\143\157\156\x66\151\x67\x20\146\151\154\145\x20\45\x73\40\147\145\x6e\145\x72\x61\164\145\144\40\x69\156\x20\45\163", OPTIMIZATION_DOMAIN), "\74\143\157\x64\x65\76{$file}\x3c\57\143\157\x64\145\76", "\74\x63\x6f\144\145\x3e{$path}\74\x2f\143\157\144\x65\76"), "\157\x70\x74\151\155\151\172\141\164\x69\157\156\x2d\x63\x6f\x6e\x66\x69\147"); goto FH6sG; XwwMi: $content = preg_replace("\100\141\162\x72\141\171\x5c\x73\x2b\134\50\x40\151", "\141\x72\x72\141\x79\50", $content); goto LnOeF; ghUN0: Notice::writingPermission("\x6f\x70\x74\151\x6d\x69\172\141\x74\x69\157\156\x2d\x63\x6f\156\146\x69\147", $path); goto uUf9B; WUWRk: if ($this->getFilesystem()->exists(trailingslashit($path) . $file)) { goto XMel9; } goto QfBKI; EWwCJ: ivkek: goto ieDgM; uUf9B: goto aAvGn; goto EWwCJ; ieDgM: $content = $this->renderTwigTemplate("\143\x6f\x6e\146\x69\x67\56\160\x68\160", ["\x63\x6f\156\x66\x69\147\x73" => $configs]); goto XwwMi; XuBQ6: } goto Q8d5U; RhWTb: YzoIX: goto Ok6nL; fIO1U: $configs = $this->getConfiguration(); goto dc3JM; Ok6nL: } public function getConfiguration() : array { $configs = ["\143\x61\x63\150\x65\x5f\x73\x73\x6c" => 0, "\x63\141\x63\150\x65\x5f\x77\x65\x62\x70" => 0, "\x63\157\x6f\153\x69\145\x5f\x68\x61\x73\150" => "\x27" . Util::getConstant("\x43\x4f\117\x4b\x49\105\x48\x41\123\x48") . "\47", "\143\141\x63\x68\x65\x5f\x72\145\152\145\x63\x74\x5f\x75\x61" => 0, "\154\157\x67\x67\x65\144\137\151\156\137\x63\157\x6f\x6b\151\x65" => "\47" . Util::getConstant("\x4c\x4f\x47\x47\105\104\137\x49\x4e\x5f\x4b\105\x59") . "\x27", "\x63\141\143\x68\x65\137\162\145\x6a\145\x63\x74\137\165\162\x69" => 0, "\x63\141\143\x68\x65\x5f\x71\x75\145\162\171\x5f\x73\164\x72\151\x6e\x67\163" => 0, "\x63\141\143\150\x65\137\162\145\152\x65\x63\x74\137\x63\157\x6f\153\151\145\163" => $this->getRejectCookies()]; return $this->applyFilters("\x6f\x70\x74\x69\155\x69\x7a\x61\x74\151\157\x6e\x5f\x63\x6f\x6e\x66\x69\147\x75\162\141\164\x69\157\x6e\x73", $configs); } public function getRejectCookies() : string { goto hjpzB; hXSJ4: $cookies[] = "\143\157\155\155\x65\x6e\164\137\141\x75\164\x68\x6f\162\137"; goto Kg0mn; mPk8f: $cookies[] = "\167\160\x2d\x70\x6f\163\x74\160\141\x73\163\137"; goto mHb2L; mHb2L: $cookies[] = "\167\x70\164\x6f\x75\143\x68\x5f\163\167\151\x74\x63\x68\137\x74\x6f\x67\x67\154\145"; goto hXSJ4; Kg0mn: $cookies[] = "\143\x6f\155\x6d\x65\156\x74\x5f\141\x75\x74\x68\x6f\162\x5f\145\x6d\x61\151\x6c\x5f"; goto dDpSo; yRHiW: $cookies[] = $loggedInCookie; goto mPk8f; qm8Zd: $cookies = array_filter($cookies); goto WZVPu; WZVPu: $cookies = array_flip(array_flip($cookies)); goto wt34J; hjpzB: $loggedInCookie = explode(COOKIEHASH, LOGGED_IN_COOKIE); goto iVFnf; dDpSo: $cookies = (array) $this->applyFilters("\x6f\x70\164\x69\155\x69\172\x61\x74\151\x6f\x6e\x5f\143\141\x63\x68\145\x5f\162\145\152\145\x63\164\137\143\x6f\x6f\153\x69\145\163", $cookies); goto qm8Zd; o_VOb: $loggedInCookie = implode("\x2e\53", $loggedInCookie); goto yRHiW; wt34J: return StringUtil::addAroundQuotes(implode("\x7c", $cookies)); goto NQzYj; iVFnf: $loggedInCookie = array_map("\160\x72\145\147\x5f\161\165\x6f\x74\145", $loggedInCookie); goto o_VOb; NQzYj: } }
